

## **1ï¸âƒ£ å¦‚ä½•æŸ¥çœ‹ Webpack æ‰“åŒ…ç»“æœä½“ç§¯ï¼Ÿ**

å¸¸ç”¨æ–¹æ³•ï¼š

1. **Webpack è‡ªå¸¦ stats**

```bash
npx webpack --profile --json > stats.json
```

* ç”Ÿæˆ JSON æ–‡ä»¶ï¼Œå¯é…åˆåˆ†æå·¥å…·æŸ¥çœ‹æ¨¡å—å¤§å°ã€‚

2. **ä½¿ç”¨ç»ˆç«¯æ˜¾ç¤º**

```bash
npx webpack --mode production --display-modules
```

* æ˜¾ç¤ºæ¯ä¸ªæ¨¡å—å¤§å°ã€ä¾èµ–å…³ç³»ã€‚

3. **ä½¿ç”¨æ’ä»¶**

* `webpack-bundle-analyzer` å¯ä»¥å¯è§†åŒ–æŸ¥çœ‹æ‰“åŒ…ç»“æœã€‚

---

## **2ï¸âƒ£ å¦‚ä½•ä½¿ç”¨ `webpack-bundle-analyzer`ï¼Ÿ**

### ğŸ“˜ å®‰è£…

```bash
npm install webpack-bundle-analyzer -D
```

### ğŸ“˜ é…ç½®ç¤ºä¾‹

```js
const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;

module.exports = {
  plugins: [
    new BundleAnalyzerPlugin({
      analyzerMode: 'server', // 'server' | 'static' | 'disabled'
      openAnalyzer: true, // æ„å»ºåè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    }),
  ],
};
```

âœ… åŠŸèƒ½ï¼š

* å¯è§†åŒ–æ˜¾ç¤ºå„æ¨¡å—ä½“ç§¯ï¼›
* å¿«é€Ÿå®šä½ä½“ç§¯å¤§çš„æ¨¡å—ï¼›
* æŸ¥çœ‹é‡å¤ä¾èµ–ã€‚

---

## **3ï¸âƒ£ å¦‚ä½•è°ƒè¯• Webpack æ„å»ºè¿‡ç¨‹ï¼Ÿ**

æ–¹æ³•ï¼š

1. **è¾“å‡ºè¯¦ç»†æ—¥å¿—**

```bash
npx webpack --progress --display-modules --colors
```

2. **å¼€å¯ Profile**

```js
module.exports = {
  profile: true
};
```

* ä¼šè®°å½•æ„å»ºæ—¶é—´ã€æ¨¡å—æ„å»ºè€—æ—¶ã€‚

3. **ä½¿ç”¨ `inspectpack` æˆ– `stats.json` åˆ†æ**

```bash
npx inspectpack build stats.json
```

---

## **4ï¸âƒ£ ä»€ä¹ˆæ˜¯ Source Mapï¼Ÿæœ‰å“ªäº›ç±»å‹ï¼Ÿ**

Source Map ç”¨äº **è°ƒè¯•å‹ç¼©åçš„ä»£ç **ï¼Œå®šä½æºä»£ç è¡Œå·ã€‚

### ğŸ”¹ å¸¸è§ç±»å‹

| ç±»å‹                             | ç‰¹ç‚¹                          |
| ------------------------------ | --------------------------- |
| `eval`                         | æ„å»ºæœ€å¿«ï¼Œæ¯ä¸ªæ¨¡å—ç”¨ `eval()` åŒ…è£¹ï¼Œè°ƒè¯•æ–¹ä¾¿ |
| `cheap-eval-source-map`        | æ›´å¿«ï¼Œå¿½ç•¥åˆ—ä¿¡æ¯                    |
| `cheap-module-eval-source-map` | æ”¯æŒ loader æ˜ å°„ï¼Œå¿½ç•¥åˆ—ä¿¡æ¯          |
| `source-map`                   | ç”Ÿæˆå•ç‹¬æ–‡ä»¶ï¼Œå®Œæ•´æ˜ å°„ï¼Œé€‚åˆç”Ÿäº§            |
| `hidden-source-map`            | ä¸åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºæºç ï¼Œåªç”¨äºæŠ¥é”™è·Ÿè¸ª          |
| `nosources-source-map`         | ä¸åŒ…å«æºç ï¼Œåªæ˜¾ç¤ºè¡Œåˆ—ä¿¡æ¯               |

---

## **5ï¸âƒ£ å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒçš„ Source Map åŒºåˆ«ï¼Ÿ**

| ç¯å¢ƒ | æ¨èç±»å‹                               | ç‰¹ç‚¹                  |
| -- | ---------------------------------- | ------------------- |
| å¼€å‘ | `eval-cheap-module-source-map`     | æ„å»ºå¿«ï¼Œæ”¯æŒçƒ­æ›´æ–°           |
| ç”Ÿäº§ | `source-map` æˆ– `hidden-source-map` | ç²¾ç¡®æ˜ å°„ï¼Œä¾¿äºçº¿ä¸Šé”™è¯¯è·Ÿè¸ªï¼Œä¸æ³„éœ²æºç  |

âœ… é¢è¯•è¦ç‚¹ï¼š

> å¼€å‘ç¯å¢ƒæ³¨é‡æ„å»ºé€Ÿåº¦ï¼Œç”Ÿäº§ç¯å¢ƒæ³¨é‡è°ƒè¯•å’Œå®‰å…¨æ€§ã€‚

---

## **6ï¸âƒ£ Webpack ä¸­çš„ç¼“å­˜ç­–ç•¥æœ‰å“ªäº›ï¼Ÿ**

1. **ç¼“å­˜ Loader**ï¼š`cache-loader`
2. **ç¼“å­˜ Babel/TS è½¬è¯‘ç»“æœ**ï¼š`babel-loader` æ”¯æŒ `cacheDirectory`

```js
{
  loader: 'babel-loader',
  options: { cacheDirectory: true }
}
```

3. **æŒä¹…åŒ–ç¼“å­˜ï¼ˆPersistent Cacheï¼‰**

```js
module.exports = {
  cache: {
    type: 'filesystem',
  },
};
```

* æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ï¼Œå‡å°‘å¢é‡æ„å»ºæ—¶é—´ã€‚

---

## **7ï¸âƒ£ å¦‚ä½•æ’æŸ¥ä¾èµ–åŒ…é‡å¤æ‰“åŒ…ï¼Ÿ**

1. ä½¿ç”¨ **`webpack-bundle-analyzer`** å¯æŸ¥çœ‹é‡å¤æ¨¡å—
2. ä½¿ç”¨ **`DuplicatePackageCheckerPlugin`**

```bash
npm install duplicate-package-checker-webpack-plugin -D
```

```js
const DuplicatePackageCheckerPlugin = require('duplicate-package-checker-webpack-plugin');

module.exports = {
  plugins: [new DuplicatePackageCheckerPlugin()],
};
```

âœ… é¢è¯•è¦ç‚¹ï¼š

> é‡å¤ä¾èµ–ä¼šå¢å¤§ bundleï¼Œå°¤å…¶æ˜¯ React / Lodash ç­‰åº“ã€‚

---

## **8ï¸âƒ£ å¦‚ä½•è®© Webpack è¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼Ÿ**

### æ–¹æ³•

```bash
npx webpack --progress --colors --display-modules --display-entrypoints --display-chunks
```

æˆ–è€…åœ¨é…ç½®ä¸­ï¼š

```js
module.exports = {
  stats: {
    colors: true,
    modules: true,
    reasons: true,
    errorDetails: true,
  }
};
```

---

## **9ï¸âƒ£ å¦‚ä½•ä½¿ç”¨ Profile æŸ¥çœ‹æ€§èƒ½ç“¶é¢ˆï¼Ÿ**

1. æ‰“å¼€ Profile

```js
module.exports = {
  profile: true,
};
```

2. ç”Ÿæˆ stats.json

```bash
npx webpack --profile --json > stats.json
```

3. ä½¿ç”¨ **Webpack Analyse å·¥å…·**ï¼š

* `webpack-bundle-analyzer`
* `webpack-visualizer`
* `speed-measure-webpack-plugin` (SMP) æŸ¥çœ‹å„æ’ä»¶ã€loaderè€—æ—¶

---

## **ğŸ”Ÿ å¦‚ä½•å‡å°‘é¦–æ¬¡æ„å»ºä¸å¢é‡æ„å»ºçš„æ—¶é—´ï¼Ÿ**

### ğŸ”¹ ä¼˜åŒ–ç­–ç•¥

1. **å¼€å¯ç¼“å­˜**

   * `cache: { type: 'filesystem' }`
2. **å¼€å¯å¤šè¿›ç¨‹/çº¿ç¨‹**

   * `thread-loader` æˆ– `TerserPlugin.parallel`
3. **æŒ‰éœ€åŠ è½½æ¨¡å—**

   * ä½¿ç”¨ Code Splittingï¼Œå‡å°‘å…¥å£æ¨¡å—å¤§å°
4. **å‡å°‘ Loader æ•°é‡**

   * exclude node_modules
5. **å¼€å¯æŒä¹…åŒ–ç¼“å­˜ + Babel cache**

```js
{
  loader: 'babel-loader',
  options: { cacheDirectory: true }
}
```

6. **é¿å…é‡å¤ä¾èµ–**

   * ä½¿ç”¨ externals æˆ– SplitChunks æå–å…¬å…±åº“

---

### ğŸ”‘ é¢è¯•æ€»ç»“

* **åˆ†æä½“ç§¯** â†’ bundle-analyzer / stats
* **è°ƒè¯•æ„å»º** â†’ stats.json + profile + è¾“å‡ºæ—¥å¿—
* **ä¼˜åŒ–å¢é‡æ„å»º** â†’ ç¼“å­˜ + å¤šçº¿ç¨‹ + æŒ‰éœ€åˆ†å‰²
* **Source Map** â†’ å¼€å‘å¿«ï¼Œç”Ÿäº§å®‰å…¨

---

å¦‚æœä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥æŠŠå‰é¢å››ç»„é¢˜ï¼ˆå…± 60 é“ï¼‰æ•´ç†æˆ **ã€ŠWebpack é¢è¯•å…¨å¥—ç²¾è®² PDFã€‹**ï¼š

* åˆ†ä¸º **åŸç†ã€ä¼˜åŒ–ã€é…ç½®ã€æ€§èƒ½** å››ç« 
* é…ç½®ç¤ºä¾‹ + å›¾è§£ + é¢è¯•è¦ç‚¹
* å¯ç›´æ¥æ‰“å°å¤ä¹ æˆ–å¯¼å…¥ Notion

ä½ å¸Œæœ›æˆ‘å¸®ä½ æ’ç‰ˆå¯¼å‡ºå—ï¼Ÿ
