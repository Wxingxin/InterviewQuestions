这一组题属于 **Webpack 构建分析与性能优化**，核心是如何查看打包结果、调试、分析性能和优化增量构建。下面我为你逐题解析，附操作示例和面试要点。

---

## **1️⃣ 如何查看 Webpack 打包结果体积？**

常用方法：

1. **Webpack 自带 stats**

```bash
npx webpack --profile --json > stats.json
```

* 生成 JSON 文件，可配合分析工具查看模块大小。

2. **使用终端显示**

```bash
npx webpack --mode production --display-modules
```

* 显示每个模块大小、依赖关系。

3. **使用插件**

* `webpack-bundle-analyzer` 可以可视化查看打包结果。

---

## **2️⃣ 如何使用 `webpack-bundle-analyzer`？**

### 📘 安装

```bash
npm install webpack-bundle-analyzer -D
```

### 📘 配置示例

```js
const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;

module.exports = {
  plugins: [
    new BundleAnalyzerPlugin({
      analyzerMode: 'server', // 'server' | 'static' | 'disabled'
      openAnalyzer: true, // 构建后自动打开浏览器
    }),
  ],
};
```

✅ 功能：

* 可视化显示各模块体积；
* 快速定位体积大的模块；
* 查看重复依赖。

---

## **3️⃣ 如何调试 Webpack 构建过程？**

方法：

1. **输出详细日志**

```bash
npx webpack --progress --display-modules --colors
```

2. **开启 Profile**

```js
module.exports = {
  profile: true
};
```

* 会记录构建时间、模块构建耗时。

3. **使用 `inspectpack` 或 `stats.json` 分析**

```bash
npx inspectpack build stats.json
```

---

## **4️⃣ 什么是 Source Map？有哪些类型？**

Source Map 用于 **调试压缩后的代码**，定位源代码行号。

### 🔹 常见类型

| 类型                             | 特点                          |
| ------------------------------ | --------------------------- |
| `eval`                         | 构建最快，每个模块用 `eval()` 包裹，调试方便 |
| `cheap-eval-source-map`        | 更快，忽略列信息                    |
| `cheap-module-eval-source-map` | 支持 loader 映射，忽略列信息          |
| `source-map`                   | 生成单独文件，完整映射，适合生产            |
| `hidden-source-map`            | 不在浏览器中显示源码，只用于报错跟踪          |
| `nosources-source-map`         | 不包含源码，只显示行列信息               |

---

## **5️⃣ 开发环境与生产环境的 Source Map 区别？**

| 环境 | 推荐类型                               | 特点                  |
| -- | ---------------------------------- | ------------------- |
| 开发 | `eval-cheap-module-source-map`     | 构建快，支持热更新           |
| 生产 | `source-map` 或 `hidden-source-map` | 精确映射，便于线上错误跟踪，不泄露源码 |

✅ 面试要点：

> 开发环境注重构建速度，生产环境注重调试和安全性。

---

## **6️⃣ Webpack 中的缓存策略有哪些？**

1. **缓存 Loader**：`cache-loader`
2. **缓存 Babel/TS 转译结果**：`babel-loader` 支持 `cacheDirectory`

```js
{
  loader: 'babel-loader',
  options: { cacheDirectory: true }
}
```

3. **持久化缓存（Persistent Cache）**

```js
module.exports = {
  cache: {
    type: 'filesystem',
  },
};
```

* 文件系统缓存，减少增量构建时间。

---

## **7️⃣ 如何排查依赖包重复打包？**

1. 使用 **`webpack-bundle-analyzer`** 可查看重复模块
2. 使用 **`DuplicatePackageCheckerPlugin`**

```bash
npm install duplicate-package-checker-webpack-plugin -D
```

```js
const DuplicatePackageCheckerPlugin = require('duplicate-package-checker-webpack-plugin');

module.exports = {
  plugins: [new DuplicatePackageCheckerPlugin()],
};
```

✅ 面试要点：

> 重复依赖会增大 bundle，尤其是 React / Lodash 等库。

---

## **8️⃣ 如何让 Webpack 输出详细日志？**

### 方法

```bash
npx webpack --progress --colors --display-modules --display-entrypoints --display-chunks
```

或者在配置中：

```js
module.exports = {
  stats: {
    colors: true,
    modules: true,
    reasons: true,
    errorDetails: true,
  }
};
```

---

## **9️⃣ 如何使用 Profile 查看性能瓶颈？**

1. 打开 Profile

```js
module.exports = {
  profile: true,
};
```

2. 生成 stats.json

```bash
npx webpack --profile --json > stats.json
```

3. 使用 **Webpack Analyse 工具**：

* `webpack-bundle-analyzer`
* `webpack-visualizer`
* `speed-measure-webpack-plugin` (SMP) 查看各插件、loader耗时

---

## **🔟 如何减少首次构建与增量构建的时间？**

### 🔹 优化策略

1. **开启缓存**

   * `cache: { type: 'filesystem' }`
2. **开启多进程/线程**

   * `thread-loader` 或 `TerserPlugin.parallel`
3. **按需加载模块**

   * 使用 Code Splitting，减少入口模块大小
4. **减少 Loader 数量**

   * exclude node_modules
5. **开启持久化缓存 + Babel cache**

```js
{
  loader: 'babel-loader',
  options: { cacheDirectory: true }
}
```

6. **避免重复依赖**

   * 使用 externals 或 SplitChunks 提取公共库

---

### 🔑 面试总结

* **分析体积** → bundle-analyzer / stats
* **调试构建** → stats.json + profile + 输出日志
* **优化增量构建** → 缓存 + 多线程 + 按需分割
* **Source Map** → 开发快，生产安全

---

如果你需要，我可以把前面四组题（共 60 道）整理成 **《Webpack 面试全套精讲 PDF》**：

* 分为 **原理、优化、配置、性能** 四章
* 配置示例 + 图解 + 面试要点
* 可直接打印复习或导入 Notion

你希望我帮你排版导出吗？
