这组题属于 **Webpack 实战配置与项目应用** 的进阶面试题，重点考察你在实际项目中对 Webpack 的配置能力。下面我为你逐条详细解析，并给出配置示例和面试要点。

---

## **1️⃣ 如何在 Webpack 中配置环境变量？**

Webpack 可以通过 **DefinePlugin** 注入环境变量到代码中。

### 📘 配置示例

```js
const webpack = require('webpack');

module.exports = {
  plugins: [
    new webpack.DefinePlugin({
      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV || 'development'),
      'process.env.API_BASE_URL': JSON.stringify('https://api.example.com'),
    }),
  ],
};
```

### ✅ 注意点

* `DefinePlugin` 是文本替换，不是注入变量；
* 通常配合 `.env` 文件使用 `dotenv` 加载。

---

## **2️⃣ 如何让 Webpack 支持 CSS/SCSS/LESS？**

Webpack 通过 **Loader** 处理样式文件。

### 📘 配置示例

```js
module.exports = {
  module: {
    rules: [
      // CSS
      { test: /\.css$/, use: ['style-loader', 'css-loader'] },
      // SCSS
      { test: /\.scss$/, use: ['style-loader', 'css-loader', 'sass-loader'] },
      // LESS
      { test: /\.less$/, use: ['style-loader', 'css-loader', 'less-loader'] },
    ],
  },
};
```

* **style-loader**：把 CSS 注入到 DOM 中；
* **css-loader**：解析 `@import` 和 `url()`；
* **sass-loader / less-loader**：编译 SCSS / LESS。

---

## **3️⃣ 如何提取公共代码（SplitChunksPlugin）？**

Webpack 5 内置 **SplitChunksPlugin**，用于提取公共模块，减少重复代码。

### 📘 配置示例

```js
module.exports = {
  optimization: {
    splitChunks: {
      chunks: 'all', // all: 同步 + 异步模块都分割
      cacheGroups: {
        vendors: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          chunks: 'all',
        },
        commons: {
          test: /[\\/]src[\\/]components[\\/]/,
          name: 'commons',
          minChunks: 2,
        },
      },
    },
  },
};
```

✅ 优点：

* 避免重复打包第三方库；
* 提升缓存利用率；
* 减少主 bundle 体积。

---

## **4️⃣ 如何配置图片、字体等静态资源？**

Webpack 5 推荐使用 **Asset Modules**，无需额外 loader。

### 📘 配置示例

```js
module.exports = {
  module: {
    rules: [
      {
        test: /\.(png|jpe?g|gif|svg)$/i,
        type: 'asset', // 自动选择 inline / resource
        parser: { dataUrlCondition: { maxSize: 8 * 1024 } }, // 小于 8KB inline
      },
      {
        test: /\.(woff2?|eot|ttf|otf)$/i,
        type: 'asset/resource',
      },
    ],
  },
};
```

* `asset/resource` → 生成文件；
* `asset/inline` → 内联 base64；
* `asset` → 自动选择。

---

## **5️⃣ 如何使用 Babel 优化老旧浏览器兼容？**

使用 **@babel/preset-env** + `useBuiltIns: 'usage'` 配合 `core-js` 自动注入 polyfill。

### 📘 配置示例

```bash
npm install @babel/core babel-loader @babel/preset-env core-js -D
```

```js
module.exports = {
  module: {
    rules: [
      {
        test: /\.js$/,
        use: {
          loader: 'babel-loader',
          options: {
            presets: [
              ['@babel/preset-env', {
                useBuiltIns: 'usage',
                corejs: 3,
                targets: "> 0.25%, not dead",
              }],
            ],
          },
        },
      },
    ],
  },
};
```

✅ 优点：

* 自动根据目标浏览器注入 polyfill；
* 减少冗余代码。

---

## **6️⃣ 如何在 Webpack 中开启 gzip 压缩？**

使用 **compression-webpack-plugin**。

### 📘 配置示例

```bash
npm install compression-webpack-plugin -D
```

```js
const CompressionPlugin = require('compression-webpack-plugin');

module.exports = {
  plugins: [
    new CompressionPlugin({
      test: /\.(js|css)$/,
      algorithm: 'gzip',
      threshold: 10240,
      minRatio: 0.8,
    }),
  ],
};
```

✅ 注意：

* 生产环境使用；
* 服务器需配置读取 `.gz` 文件或启用压缩传输。

---

## **7️⃣ 如何使用 Webpack 配置 React/Vue 项目？**

### React

```bash
npm install react react-dom @babel/preset-react babel-loader -D
```

```js
module.exports = {
  module: {
    rules: [
      {
        test: /\.jsx?$/,
        use: 'babel-loader',
        exclude: /node_modules/,
      },
    ],
  },
  resolve: { extensions: ['.js', '.jsx'] },
};
```

### Vue

```bash
npm install vue vue-loader vue-template-compiler -D
```

```js
const { VueLoaderPlugin } = require('vue-loader');
module.exports = {
  module: {
    rules: [{ test: /\.vue$/, loader: 'vue-loader' }],
  },
  plugins: [new VueLoaderPlugin()],
};
```

---

## **8️⃣ 如何用 Webpack 实现 SSR（服务端渲染）？**

Webpack 可以打包服务端入口：

* target: `node`
* 输出模块类型: `commonjs2`

### 📘 示例

```js
module.exports = {
  target: 'node',
  entry: './src/server.js',
  output: {
    path: __dirname + '/dist',
    filename: 'server.js',
    libraryTarget: 'commonjs2',
  },
  module: { rules: [/* js/ts loader */] },
};
```

✅ 配合 Node 服务器：

* 客户端 bundle 负责前端渲染；
* 服务端 bundle 负责生成 HTML 并发送给浏览器。

---

## **9️⃣ 如何使用 Webpack 打包库（library）？**

### 📘 配置示例

```js
module.exports = {
  entry: './src/index.js',
  output: {
    path: __dirname + '/dist',
    filename: 'my-lib.js',
    library: 'MyLib', // 全局变量名
    libraryTarget: 'umd', // 支持 CommonJS、AMD、全局变量
    globalObject: 'this',
  },
};
```

✅ 注意：

* libraryTarget 支持多种模块规范（UMD 通用库）；
* 可以通过 externals 排除依赖，减小体积。

---

## **🔟 如何在 Webpack 中集成 ESLint、Prettier？**

### ESLint

```bash
npm install eslint eslint-loader -D
```

```js
module: {
  rules: [
    { test: /\.js$/, enforce: 'pre', use: 'eslint-loader', exclude: /node_modules/ }
  ],
},
```

### Prettier

* 配合 eslint 插件 `eslint-config-prettier`，保证格式化规则不冲突；
* 可在 IDE 或 git hook（husky + lint-staged）中自动执行。

```json
// .eslintrc
{
  "extends": ["eslint:recommended", "plugin:prettier/recommended"]
}
```

---

### 🔑 **面试要点总结**

* 能区分**开发环境和生产环境**的优化手段；
* 熟悉 **loader / plugin** 的作用；
* 知道如何处理静态资源、样式、JS 语法兼容；
* 能实现 **代码分割、gzip、SSR、库打包** 等进阶需求；
* 能集成 **代码规范工具** 提升团队协作效率。

---

如果你愿意，我可以帮你把这四套题（30 + 10 + 10 + 10，共 60 道）整理成
📘《Webpack 面试全套手册》PDF版

* 每题要点 + 配置示例 + 原理解析
* 可打印或导入 Notion 学习
* 带图解 HMR、模块加载、Tree Shaking

要我帮你排版导出吗？
