ä½ é—®å¾—éå¸¸å…³é”®ï¼
**Entityï¼ˆå®ä½“ï¼‰è·Ÿ DTOã€VO è™½ç„¶éƒ½æ˜¯ classï¼Œä½†ä¸‰è€…çš„èŒè´£å®Œå…¨ä¸åŒã€‚**
ç®€å•è¯´ï¼š

> **DTO = è¾“å…¥ï¼ˆå‰ç«¯ â†’ åç«¯ï¼‰**
> **VO = è¾“å‡ºï¼ˆåç«¯ â†’ å‰ç«¯ï¼‰**
> **Entity = æ•°æ®åº“å¯¹è±¡ï¼ˆæ•°æ®åº“ â†” åç«¯ï¼‰**

ç»“æ„å¯èƒ½é•¿å¾—åƒï¼Œä½†æœ¬è´¨å®Œå…¨ä¸åŒã€‚

ä¸ºäº†è®©ä½ å½»åº•ç†è§£ï¼Œæˆ‘ç»™ä½ åšä¸€ä¸ªéå¸¸é€šä¿— + ä»£ç çº§åˆ«çš„è§£é‡Šã€‚

---

# ğŸ§± 1. Entity æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯ç±»ä¼¼ DTO/VOï¼Ÿ

### âœ” ç»“æ„ä¸Šç±»ä¼¼ï¼ˆéƒ½æ˜¯ classï¼‰

### âŒ ä½†èŒè´£å®Œå…¨ä¸ä¸€æ ·

**Entity æ˜¯ ORMï¼ˆå¦‚ TypeORMã€Prismaï¼‰ç”¨äºæ˜ å°„æ•°æ®åº“è¡¨çš„å¯¹è±¡ã€‚**
é‡Œé¢åŒ…å«ï¼š

* å­—æ®µ = è¡¨å­—æ®µ
* è£…é¥°å™¨ = æ•°æ®åº“å…ƒæ•°æ®ï¼ˆåˆ—ç±»å‹ã€ç´¢å¼•ã€å…³ç³»ç­‰ï¼‰
* å¯èƒ½æœ‰å…³ç³»ï¼ˆOneToMany, ManyToOneï¼‰
* å¯èƒ½æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆBeforeInsert, AfterUpdateï¼‰

DTO/VO å®Œå…¨ä¸åŒ…å«è¿™äº›ã€‚

**æ‰€ä»¥ Entity å’Œ DTOã€VO è™½ç„¶éƒ½æ˜¯ classï¼Œä½†ç”¨é€”å®Œå…¨ä¸ä¸€æ ·ï¼**

---

# ğŸ“¦ 2. ç”¨ä¸€ä¸ªä¾‹å­ 5 ç§’ç†è§£ä¸‰è€…åŒºåˆ«

ä½ åšâ€œç”¨æˆ·æ³¨å†Œâ€ï¼Œè¿‡ç¨‹ä¼šæ¶‰åŠï¼š

## **â‘  å‰ç«¯æäº¤æ³¨å†Œè¡¨å• â†’ DTO**

```ts
export class RegisterDto {
  email: string;
  password: string;
}
```

## **â‘¡ åç«¯ä¿å­˜åˆ°æ•°æ®åº“ â†’ Entity**

```ts
@Entity('users')
export class UserEntity {
  @PrimaryGeneratedColumn()
  id: number;

  @Column()
  email: string;

  @Column()
  password: string;

  @CreateDateColumn()
  createdAt: Date;
}
```

Entity ä¿å­˜åˆ°æ•°æ®åº“ï¼Œå±äºåç«¯å†…éƒ¨ç»“æ„ã€‚

## **â‘¢ åç«¯è¿”å›ç»™å‰ç«¯çš„æ•°æ® â†’ VO**

```ts
export class UserVO {
  id: number;
  email: string;
  createdAt: Date;
}
```

æ³¨æ„ï¼šVO ä¸è¿”å› passwordã€‚

ä¸‰è€…å¯¹åº”ä¸‰å±‚ï¼š

| é˜¶æ®µ     | æ•°æ®å¯¹è±¡   | æ˜¯å¦æš´éœ²ç»™å‰ç«¯ |
| ------ | ------ | ------- |
| æ¥æ”¶å‰ç«¯   | DTO    | âœ” å¿…é¡»    |
| æ•°æ®åº“æŒä¹…åŒ– | Entity | âŒ ä¸èƒ½æš´éœ²  |
| è¿”å›å‰ç«¯   | VO     | âœ” å¯ä»¥    |

---

# ğŸ” 3. Entity çš„æ ¸å¿ƒèƒ½åŠ›ï¼ˆDTO/VO æ²¡æœ‰ï¼‰

## **â‘  æ•°æ®åº“å­—æ®µå®šä¹‰**

```ts
@Column({ length: 50 })
email: string;
```

## **â‘¡ ä¸»é”®**

```ts
@PrimaryGeneratedColumn()
id: number;
```

## **â‘¢ è‡ªåŠ¨æ—¶é—´æˆ³**

```ts
@CreateDateColumn()
createdAt: Date;
```

## **â‘£ å…³ç³»æ˜ å°„**

```ts
@OneToMany(() => OrderEntity, order => order.user)
orders: OrderEntity[];
```

## **â‘¤ ç”Ÿå‘½å‘¨æœŸé’©å­**

```ts
@BeforeInsert()
hashPassword() { ... }
```

DTO å’Œ VO å°±æ˜¯æ™®é€šç±»ï¼Œä¸å…·å¤‡è¿™äº›èƒ½åŠ›ã€‚

---

# ğŸ¯ 4. Entity = æ•°æ®åº“æ¨¡å‹ï¼Œåƒä¸‡ä¸è¦ç›´æ¥è¿”å›ç»™å‰ç«¯

ä¸ºä»€ä¹ˆï¼Ÿ

### ğŸš« ä¼šæŠŠå¯†ç æš´éœ²å‡ºå»

Entityï¼š

```ts
@Column()
password: string;
```

å¦‚æœä½ è¿™ä¹ˆå†™ï¼š

```ts
return userEntity;
```

é‚£ä¹ˆå‰ç«¯èƒ½çœ‹åˆ°ï¼š

```json
{
  "id": 1,
  "email": "xxx@example.com",
  "password": "$2c$10$api..."
}
```

è¿™æ˜¯ä¸¥é‡çš„å®‰å…¨é—®é¢˜ã€‚

æ‰€ä»¥ï¼š

> **Entity åªèƒ½ç”¨äºåç«¯å†…éƒ¨ï¼Œä¸èƒ½ç›´æ¥åœ¨ Controller é‡Œè¿”å›ã€‚**

---

# ğŸ”¥ 5. æ ‡å‡†åˆ†å±‚ï¼ˆä¼ä¸šçº§æœ€ä½³å®è·µï¼‰

```txt
         å‰ç«¯
           â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   DTOï¼ˆè¾“å…¥ï¼‰ â”‚ â† æ ¡éªŒ
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Entityï¼ˆå®ä½“ï¼‰â”‚ â† æ˜ å°„ DB
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   VOï¼ˆè¾“å‡ºï¼‰  â”‚ â† è¿”å›ç»“æ„
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
         å‰ç«¯
```

---

# ğŸ“˜ 6. æœ€ç›´è§‚çš„ä¾‹å­ï¼ˆå®Œæ•´æµç¨‹ï¼‰

### **DTOï¼šCreateUserDto**

```ts
export class CreateUserDto {
  email: string;
  password: string;
}
```

### **Entityï¼šUserEntity**

```ts
@Entity()
export class UserEntity {
  @PrimaryGeneratedColumn()
  id: number;
  
  @Column()
  email: string;

  @Column()
  password: string;

  @CreateDateColumn()
  createdAt: Date;
}
```

### **VOï¼šUserVO**

```ts
export class UserVO {
  id: number;
  email: string;
  createdAt: Date;
}
```

Controllerï¼š

```ts
@Post()
async create(@Body() dto: CreateUserDto): Promise<UserVO> {
  const entity = await this.userService.create(dto);

  return {
    id: entity.id,
    email: entity.email,
    createdAt: entity.createdAt,
  };
}
```

---

# âœ… æ€»ç»“ï¼ˆæœ€é‡è¦ï¼‰

| ç±»å‹     | ç”¨é€”      | æ˜¯å¦ä¸æ•°æ®åº“ç›¸å…³ | æ˜¯å¦æš´éœ²ç»™å‰ç«¯ |
| ------ | ------- | -------- | ------- |
| DTO    | æ¥æ”¶å‰ç«¯è¾“å…¥  | âŒ        | âœ”       |
| Entity | æ•°æ®åº“æ“ä½œ   | âœ”        | âŒ       |
| VO     | è¿”å›ç»™å‰ç«¯ç»“æœ | âŒ        | âœ”       |

### âœ” è™½ç„¶éƒ½æ˜¯ classï¼Œä½†ä¸‰è€…èŒè´£å®Œå…¨ä¸åŒ

### âœ” Entity ä¸“é—¨è·Ÿæ•°æ®åº“æ‰“äº¤é“

### âœ” ä¸èƒ½æŠŠ Entity ç›´æ¥è¿”å›ç»™å‰ç«¯

### âœ” DTO/VO æ˜¯ API è¾“å…¥/è¾“å‡ºæ¨¡å‹

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘è¿˜èƒ½å¸®ä½ ç”Ÿæˆï¼š

ğŸ“Œ **ä½ é¡¹ç›®é‡Œé€‚åˆçš„ DTO/Entity/VO ç›®å½•ç»“æ„æ¨¡æ¿**
ğŸ“Œ ä¸€å¥—æœ€ä½³å®è·µ Demoï¼ˆåŒ…æ‹¬ Swaggerã€Mapperã€Serviceï¼‰

éœ€è¦å—ï¼Ÿ
