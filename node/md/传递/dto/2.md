下面我详细解释一下你提到的这些常用 **class-validator** 装饰器的作用、典型用法、常见错误，它们是 NestJS 中最基础也最常用的字段校验规则。

---

# 🧩 1. `@IsString()`

### **作用：校验该字段必须为字符串类型**

✔ 通过示例：

```ts
name: "Tom"
```

❌ 不通过示例：

```ts
name: 123         // number
name: ["Tom"]     // array
name: { v: "x" }  // object
```

**典型用途：**

```ts
@IsString()
username: string;
```

> 配合 `transform:true` 可将 `"123"` 保留为 string，而不会被转成 number。

---

# 🧩 2. `@IsInt()`

### **作用：校验字段必须是整数（integer）**

✔ 通过：

```ts
age: 18
```

❌ 不通过：

```ts
age: "18"  // 字符串（除非 transform）
age: 18.5  // 小数
```

**典型用途：**

```ts
@IsInt()
age: number;
```

> ⚠ 注意：如果你想让 `"18"` 自动转换为 `18`，需要 `transform + enableImplicitConversion`。

---

# 🧩 3. `@Min(value)`

### **作用：限制字段的最小值**

✔ 通过：

```ts
age: 1
```

❌ 不通过：

```ts
age: 0
age: -10
```

示例：

```ts
@Min(1)
@IsInt()
age: number;
```

> 常用于分页、年龄、金额、排序字段。

---

# 🧩 4. `@MaxLength(n)`

### **作用：校验字符串最大长度**

✔ 通过：

```ts
name: "abcdef"     // 长度6 ≤ 10
```

❌ 不通过：

```ts
name: "abcdefghijk"  // 长度11 > 10
```

示例：

```ts
@IsString()
@MaxLength(10)
nickname: string;
```

---

# 🧩 5. `@IsEmail()`

### **作用：校验字段必须是合法邮箱格式**

✔ 通过：

```ts
email: "test@example.com"
```

❌ 不通过：

```ts
email: "a@b"
email: "not-an-email"
email: "123"
```

示例：

```ts
@IsEmail()
email: string;
```

---

# 🧩 6. `@IsOptional()`

### **作用：字段可选，不传不报错**

**区别于下面 3 个情况：**

| 情况              | 字段未传是否报错  | 字段传了是否继续校验 |
| --------------- | --------- | ---------- |
| 默认              | ❌ 会报错（必填） | ✔ 校验       |
| `@IsOptional()` | ✔ 不报错     | ✔ 一旦传值会校验  |
| 仅 `?` 可选语法      | ❌ 会报错     | ✔ 校验       |

示例：

```ts
@IsOptional()
@IsString()
bio?: string;
```

表现：

* 不传 `bio` ✔（不报错）
* 传 `"hello"` ✔
* 传 `{}` ❌（不是字符串）
* 传 `123` ❌

---

# 📌 7. 它们通常配合使用

比如定义“创建用户”的 DTO：

```ts
export class CreateUserDto {
  @IsString()
  @MaxLength(20)
  name: string;

  @IsInt()
  @Min(0)
  age: number;

  @IsEmail()
  email: string;

  @IsOptional()
  @IsString()
  bio?: string;
}
```

只要传来的 JSON 不符合这些规则，就会自动触发 400 错误。

---

# 🧠 8. 为什么 class-validator 非常重要？

在 NestJS 中：

* **它是 DTO 校验的核心工具**
* **帮助你自动过滤非法数据**
* **极大减少手写校验逻辑**
* **防御恶意输入（如多余字段、非法类型）**
* **保证 Controller 和 Service 接收到的结构安全可靠**

基本所有企业级项目都会大量使用。

---

# 📬 要不要我编一张“class-validator 装饰器速查表（超过 50 个）”？

也可以按你的接口帮你写一套完整的 DTO 模版。
