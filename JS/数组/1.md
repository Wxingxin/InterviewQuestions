## 一、数组基础

1. **定义数组**

```js
let arr1 = [1, 2, 3];
let arr2 = new Array(3); // [empty × 3]
let arr3 = Array.of(3); // [3]
```

2. **数组的本质**

-  JS 中数组其实是 **特殊对象**，键是数字索引。
-  长度 `length` 可自动调整：

   ```js
   let arr = [1, 2, 3];
   arr.length = 1; // [1]
   arr.length = 5; // [1, <4 empty items>]
   ```

## 二、数组属性与遍历

1. **常见属性**

-  `length`：数组长度，可修改。
-  稀疏数组：索引不连续，性能更差。

2. **constructor**

-  作用：返回创建数组的构造函数（即 `Array`）。
-  用途：通常用于判断对象是否为数组（但更推荐 `Array.isArray()`）

3. **prototype（数组构造函数的属性）**

-  作用：Array.prototype 是所有数组实例的原型对象，数组的所有方法（如 `push`、`map`）都定义在其上。
-  注意：这是 Array 构造函数的属性，而非数组实例的属性，但所有数组都能继承其方法。

4. **遍历方式**

-  `for` 循环（经典写法，最快）。
-  `for...of` → 遍历值。
-  `for...in` → 遍历索引（不推荐，会遍历原型）。
-  `forEach` → 回调遍历，不能中断。
-  `map/filter/reduce` → 函数式写法。

## 一、`for` 循环（经典写法）

```js
const arr = [10, 20, 30];
for (let i = 0; i < arr.length; i++) {
   console.log(i, arr[i]);
}
```

🔑 特点：

-  访问 **索引和值**。
-  可中途 `break` 或 `continue`。
-  性能最高（少了函数调用开销）。

❗ 注意：

-  若数组很大，`arr.length` 最好缓存到变量中，避免每次重新读取。

---

## 二、`for...of`（ES6）

```js
const arr = [10, 20, 30];
for (const value of arr) {
   console.log(value);
}
```

🔑 特点：

-  直接遍历 **值**。
-  可搭配 `break`、`continue`、`return`。
-  遍历可迭代对象（数组、Set、Map、字符串等）。

❗ 注意：

-  无法直接获取 **索引**，如果需要索引：

   ```js
   for (const [index, value] of arr.entries()) {
      console.log(index, value);
   }
   ```

---

## 三、`for...in`

```js
const arr = [10, 20, 30];
for (const key in arr) {
   console.log(key, arr[key]);
}
```

🔑 特点：

-  遍历 **可枚举属性**，包括继承的属性。
-  结果是 **字符串索引**（不是数字）。

❗ 不推荐用于数组：

```js
Array.prototype.test = "oops";
for (const k in [1, 2]) {
   console.log(k); // 0, 1, test
}
```

👉 更适合 **对象属性遍历**，而不是数组。

---

## 四、`forEach`

```js
const arr = [10, 20, 30];
arr.forEach((value, index, array) => {
   console.log(index, value, array);
});
```

🔑 特点：

-  回调参数 `(value, index, array)`。
-  **不能用 `break`、`continue`**，也不会提前退出循环。
-  更适合做副作用操作（比如打印、DOM 操作）。

❗ 注意：

```js
[1, 2, 3].forEach((num) => {
   if (num === 2) return; // 只是 return 出了当前回调，不是整个循环
   console.log(num);
});
// 输出 1, 3
```

---

## 五、`map / filter / reduce`（函数式写法）

### 1. `map` → 映射新数组

```js
const arr = [1, 2, 3];
const newArr = arr.map((x) => x * 2); // [2,4,6]
```

-  返回新数组，原数组不变。
-  一般用于 **一一映射转换**。

---

### 2. `filter` → 筛选

```js
const arr = [1, 2, 3, 4];
const even = arr.filter((x) => x % 2 === 0); // [2,4]
```

-  返回满足条件的新数组。

---

### 3. `reduce` → 累积计算

```js
const arr = [1, 2, 3, 4];
const sum = arr.reduce((acc, cur) => acc + cur, 0); // 10
```

-  `reduce(fn, init)`，第一个参数是累积函数，第二个是初始值。
-  可实现：

   -  数组求和 / 最大值 / 扁平化
   -  `map` / `filter` 的功能

例：用 `reduce` 实现 `map`

```js
const arr = [1, 2, 3];
const double = arr.reduce((acc, cur) => {
   acc.push(cur * 2);
   return acc;
}, []);
console.log(double); // [2,4,6]
```

例：用 `reduce` 实现 `for`

```js
let arr1 = [11, 666, 39, 77];

const arr4 = arr1.reduce((acc, cur) => {
   acc.push(cur); // 把当前元素加入累加器数组
   return acc; // 返回累加器给下一次循环
}, []); // 初始值为 []
console.log(arr4); // [11, 666, 39, 77]
```

---

## 六、遍历方式对比表

| 遍历方式 | 是否能中断        | 是否返回新数组   | 是否遍历索引                 | 适用场景                 |
| -------- | ----------------- | ---------------- | ---------------------------- | ------------------------ |
| for      | ✅ break/continue | ❌               | ✅                           | 经典遍历，性能最高       |
| for...of | ✅ break/continue | ❌               | ❌（需 entries）             | 遍历值，语法简洁         |
| for...in | ✅                | ❌               | ✅（字符串索引，含继承属性） | 遍历对象属性，不推荐数组 |
| forEach  | ❌                | ❌               | ✅                           | 副作用（打印、操作 DOM） |
| map      | ❌                | ✅               | ✅                           | 一一映射                 |
| filter   | ❌                | ✅               | ✅                           | 条件筛选                 |
| reduce   | ❌                | ✅（返回累积值） | ✅                           | 汇总、折叠、实现复杂逻辑 |

---

## 七、面试高频陷阱

1. **forEach 无法中断**

```js
[1,2,3].forEach(x => {
  if (x === 2) break; // ❌ 报错
});
```

解决 → 用 `for` 或 `for...of`。

---

2. **for...in 遍历数组有坑**

```js
const arr = [1, 2, 3];
arr.test = 100;
for (let k in arr) console.log(k); // 0,1,2,test
```

---

3. **map 一定返回新数组**

```js
const arr = [1, 2, 3];
arr.map((x) => console.log(x)); // [undefined, undefined, undefined]
```

👉 忘记写 `return`。

---

✅ 总结：

-  需要中断 → 用 `for` 或 `for...of`。
-  想做转换 → 用 `map` / `filter` / `reduce`。
-  打印副作用 → 用 `forEach`。
-  千万别用 `for...in` 遍历数组。

# 常见的方法

### 1. 改变原数组的方法

-  `push` / `pop` → 末尾增删
-  `shift` / `unshift` → 头部增删
-  `splice(start, deleteCount, ...items)` → 增删改万能方法
-  `sort(fn)` → 排序（注意默认是按字符串排序！）
-  `reverse()` → 翻转
-  `concat` → 合并数组
-  `slice(start, end)` → 截取数组
-  `map` → 映射新数组
-  `filter` → 过滤新数组
-  `reduce(fn, init)` → 累积计算
-  `flat(depth)` → 扁平化数组
-  `flatMap(fn)` → 先 `map` 再扁平化
-  `indexOf(value)` / `lastIndexOf(value)`
-  `includes(value)` → 判断是否存在
-  `find(fn)` → 找到第一个符合条件的元素
-  `findIndex(fn)` → 找到第一个符合条件的索引
-  `every(fn)` → 是否全部符合
-  `some(fn)` → 是否存在一个符合
-  `forEach(fn)` → 遍历无返回值
