JavaScript 的**模板字符串（Template Literals）**是 ES6 引入的一种字符串语法，使用反引号（`` ` ``）包裹，可以包含**变量插值**、**多行文本**和**表达式计算**。它提供了比传统字符串拼接更强大、更灵活的字符串构建方式。


### 一、基本语法
#### 1. **多行字符串**
传统方式需使用 `\n` 或换行转义：
```javascript
const message = "Hello,\nWorld!";
// 输出:
// Hello,
// World!
```

模板字符串直接支持换行：
```javascript
const message = `Hello,
World!`;
// 输出:
// Hello,
// World!
```

#### 2. **变量插值**
使用 `${expression}` 语法嵌入变量或表达式：
```javascript
const name = "Alice";
const age = 30;

// 传统方式
const greeting = "Hello, " + name + ". You are " + age + " years old.";

// 模板字符串
const greeting = `Hello, ${name}. You are ${age} years old.`;
// 输出: "Hello, Alice. You are 30 years old."
```

#### 3. **表达式计算**
```javascript
const a = 10;
const b = 5;
const result = `The sum of ${a} and ${b} is ${a + b}.`;
// 输出: "The sum of 10 and 5 is 15."
```


### 二、高级用法
#### 1. **嵌套模板字符串**
```javascript
const items = ["apple", "banana", "cherry"];
const list = `
  <ul>
    ${items.map(item => `
      <li>${item}</li>
    `).join('')}
  </ul>
`;
```

#### 2. **函数调用**
```javascript
function formatPrice(price) {
  return `$${price.toFixed(2)}`;
}

const product = { name: "Laptop", price: 999.99 };
const info = `${product.name} costs ${formatPrice(product.price)}.`;
// 输出: "Laptop costs $999.99."
```

#### 3. **标签模板（Tagged Templates）**
使用函数处理模板字符串：
```javascript
function highlight(strings, ...values) {
  let result = '';
  strings.forEach((string, i) => {
    result += string;
    if (i < values.length) {
      result += `<span class="highlight">${values[i]}</span>`;
    }
  });
  return result;
}

const name = "Alice";
const age = 30;
const html = highlight`Hello, ${name}. You are ${age} years old.`;
// 输出: "Hello, <span class="highlight">Alice</span>. You are <span class="highlight">30</span> years old."
```


### 三、与传统字符串的对比
| **特性**               | **传统字符串**          | **模板字符串**              |
|------------------------|-------------------------|-----------------------------|
| **引号类型**           | `'` 或 `"`              | `` ` ``                     |
| **多行支持**           | 需使用 `\n` 或 `+` 拼接 | 直接换行                    |
| **变量插值**           | 需使用 `+` 拼接         | `${variable}` 语法          |
| **表达式计算**         | 需手动拼接表达式结果    | 直接支持 `${a + b}`         |
| **转义字符**           | 更频繁（如 `\'`）       | 更少（如 `'` 无需转义）     |
| **标签模板**           | 不支持                  | 支持（函数处理模板）        |


### 四、注意事项
1. **反引号内的特殊字符**
   - `${}` 语法是模板字符串的特殊标记，若需字面量 `$`，需用 `$$`：
     ```javascript
     const price = `The price is $${9.99}.`; // "The price is $9.99."
     const escaped = `This is a dollar sign: $$.`; // "This is a dollar sign: $."
     ```

2. **标签模板的参数结构**
   - 标签函数的第一个参数是字符串数组，后续参数是插值表达式的值：
     ```javascript
     function tag(strings, ...values) {
       console.log(strings); // ["Hello, ", ". You are ", " years old."]
       console.log(values);  // ["Alice", 30]
     }

     tag`Hello, ${name}. You are ${age} years old.`;
     ```

3. **性能考量**
   - 模板字符串在大多数场景下比多次字符串拼接更高效，但在循环中大量使用可能需要注意性能。


### 五、实际应用场景
1. **HTML 模板生成**
   ```javascript
   const user = { name: "Bob", age: 25 };
   const profile = `
     <div class="profile">
       <h2>${user.name}</h2>
       <p>Age: ${user.age}</p>
     </div>
   `;
   ```

2. **API 请求 URL 构建**
   ```javascript
   const id = 123;
   const url = `https://api.example.com/users/${id}/posts`;
   ```

3. **错误信息格式化**
   ```javascript
   function divide(a, b) {
     if (b === 0) {
       throw new Error(`Cannot divide ${a} by zero.`);
     }
     return a / b;
   }
   ```

4. **国际化（i18n）**
   ```javascript
   const messages = {
     greeting: (name) => `Hello, ${name}!`
   };

   console.log(messages.greeting("Alice")); // "Hello, Alice!"
   ```