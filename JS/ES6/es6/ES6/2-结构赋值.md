### 一、数组解构

#### 1. **基本语法**

```javascript
const arr = [1, 2, 3];
const [a, b, c] = arr;
console.log(a); // 1
console.log(b); // 2
console.log(c); // 3
```

```javascript
const nested = [1, [2, 3], 4];
const [a, [b, c], d] = nested;
console.log(b); // 2
console.log(c); // 3
```

#### 2. **忽略某些值**

```javascript
const [, second, , fourth] = [1, 2, 3, 4];
console.log(second); // 2
console.log(fourth); // 4
```

#### 3. **剩余元素（Rest）**

```javascript
const [first, ...rest] = [1, 2, 3, 4];//rest is array
console.log(first); // 1
console.log(rest); // [2, 3, 4]
```

#### 4. **默认值**

```javascript
const [a = 10, b = 20] = [1];
console.log(a); // 1
console.log(b); // 20（使用默认值）
```

#### 5. **交换变量**

```javascript
let a = 1
let  b = 2;
// console.log(a)报错
// console.log(b) 报错
[a, b] = [b, a];
console.log(a); // 2
console.log(b); // 1
```



### 二、对象解构

#### 1. **基本语法**

```javascript
const person = { name: "John", age: 30 };
const { name, age } = person;
console.log(name); // "John"
console.log(age); // 30
```

```javascript
const user = {
  id: 1,
  info: {
    name: "Alice",
    address: { city: "London" },
  },
};

const {
  info: {
    name,
    address: { city },
  },
} = user;
console.log(name); // "Alice"
console.log(city); // "London"
```

#### 2. **重命名变量**

```javascript
const { name: fullName, age: years } = person;
console.log(fullName); // "John"
console.log(years); // 30
console.log(name)//error
```

#### 3. **默认值**???

```javascript
const { city = "New York" } = person;
console.log(city); // "New York"（如果 person.city 不存在）
```

#### 4. **剩余属性（Rest）**

```javascript
const { name, ...rest } = person;//rest is object
console.log(rest); // { age: 30 }
```

#### 5. **解构函数参数**

```javascript
function printUser({ name, age }) {
  console.log(`${name} is ${age} years old.`);
}

printUser({ name: "Bob", age: 25 }); // "Bob is 25 years old."
```
- 直接解构函数返回的数组或对象：

```javascript
function getPerson() {
  return {
    name: "John",
    age: 30,
    hobbies: ["reading", "coding"],
  };
}

const { name, hobbies } = getPerson();
console.log(hobbies); // ["reading", "coding"]
```
### 三、字符串解构

字符串会被视为字符数组：

```javascript
const [a, b, c] = "abc";
console.log(a); // "a"
console.log(b); // "b"
console.log(c); // "c"
```

### 五、默认值与动态计算

默认值可以是表达式，且会在需要时才计算：

```javascript
const [x = 1 + 2] = [];
console.log(x); // 3

const [y = Math.random()] = [];
console.log(y); // 随机数
```

### 六、结合扩展运算符（Spread）

```javascript
const arr = [1, 2, 3, 4];
const [first, ...rest] = arr;
console.log(rest); // [2, 3, 4]

const obj = { a: 1, b: 2, c: 3 };
const { a, ...others } = obj;
console.log(others); // { b: 2, c: 3 }
```

### 七、注意事项

1. **变量声明与赋值**

   - 解构赋值需要变量声明（`const`, `let`, `var`）或已有变量：

     ```javascript
     // 错误：缺少变量声明
     { x, y } = { x: 1, y: 2 };

     // 正确：用括号包裹
     ({ x, y } = { x: 1, y: 2 });
     ```

2. **对象键与变量名匹配**

   - 对象解构时，变量名必须与对象键名一致（除非重命名）：

     ```javascript
     const { age } = { name: "John", age: 30 };
     console.log(age); // 30

     const { wrongName } = { name: "John" };
     console.log(wrongName); // undefined
     ```

3. **嵌套解构的深度**
   - 解构深度必须与数据结构一致，否则会报错：
     ```javascript
     const {
       info: { address },
     } = { info: null }; // 报错：Cannot destructure 'address' of 'undefined'
     ```

### 八、实际应用场景

1. **配置参数处理**

   ```javascript
   function initApp({ host = "localhost", port = 3000 } = {}) {
     console.log(`Server running at ${host}:${port}`);
   }

   initApp({ port: 8080 }); // "Server running at localhost:8080"
   ```

2. **从模块导入**

   ```javascript
   import { useState, useEffect } from "react";
   ```

3. **遍历对象数组**

   ```javascript
   const users = [
     { id: 1, name: "Alice" },
     { id: 2, name: "Bob" },
   ];

   users.forEach(({ name }) => {
     console.log(name);
   });
   ```
