### 一、默认参数值

允许为函数参数指定默认值，当参数未传递或为 `undefined` 时使用默认值。

#### 1. **基本语法**

```javascript
function greet(name = "Guest") {
  return `Hello, ${name}!`;
}

console.log(greet()); // "Hello, Guest!"
console.log(greet("Alice")); // "Hello, Alice!"
```

#### 2. **动态默认值**

默认值可以是表达式，甚至是函数调用：

```javascript
function getDefault() {
  return Math.random();
}

function calculate(a, b = getDefault()) {
  return a + b;
}

console.log(calculate(10)); // 使用随机数作为 b 的值
```

#### 3. **默认值与解构结合**

```javascript
function createUser({ name = "Anonymous", age = 18 } = {}) {
  return { name, age };
}

console.log(createUser()); // { name: "Anonymous", age: 18 }
console.log(createUser({ name: "Alice" })); // { name: "Alice", age: 18 }
```

### 二、剩余参数（Rest Parameters）

使用 `...` 语法将多个参数收集到一个数组中，必须作为最后一个参数。

#### 1. **基本语法**

```javascript
function sum(...numbers) {
  return numbers.reduce((total, num) => total + num, 0);
}

console.log(sum(1, 2, 3)); // 6
console.log(sum(1, 2, 3, 4, 5)); // 15
```

#### 2. **与普通参数混合使用**

```javascript
function greet(greeting, ...names) {
  return names.map((name) => `${greeting}, ${name}!`);
}

console.log(greet("Hello", "Alice", "Bob")); // ["Hello, Alice!", "Hello, Bob!"]
```

#### 3. **替代 arguments 对象**

剩余参数比 `arguments` 对象更灵活，且是真正的数组：

```javascript
function printArgs(...args) {
  console.log(args.sort()); // 可直接使用数组方法
}
```

### 三、扩展运算符（Spread Syntax）

使用 `...` 语法将数组或对象展开为多个元素，与剩余参数语法相反。

#### 1. **展开数组**

```javascript
const numbers = [1, 2, 3];
const newNumbers = [...numbers, 4, 5]; // [1, 2, 3, 4, 5]

// 函数调用中使用
Math.max(...numbers); // 3
```

#### 2. **展开对象**

```javascript
const user = { name: "Alice", age: 30 };
const updatedUser = { ...user, city: "New York" };
// { name: "Alice", age: 30, city: "New York" }
```

#### 3. **复制数组/对象**

```javascript
const original = [1, 2, 3];
const copy = [...original]; // 浅拷贝

const obj = { a: 1, b: 2 };
const objCopy = { ...obj }; // 浅拷贝
```

### 四、参数解构

结合对象或数组解构语法，直接提取参数值。

#### 1. **对象参数解构**

```javascript
function printUser({ name, age }) {
  console.log(`${name} is ${age} years old.`);
}

const user = { name: "Bob", age: 25 };
printUser(user); // "Bob is 25 years old."
```

#### 2. **数组参数解构**

```javascript
function printFirst([first]) {
  console.log(first);
}

printFirst([10, 20, 30]); // 10
```

#### 3. **嵌套解构**

```javascript
function printAddress({ address: { city, country } }) {
  console.log(`${city}, ${country}`);
}

const person = {
  name: "Alice",
  address: { city: "London", country: "UK" },
};

printAddress(person); // "London, UK"
```

### 五、参数顺序规则

1. **默认参数**：可以出现在任何位置，但建议放在最后以避免混淆。
2. **剩余参数**：必须是最后一个参数。
3. **解构参数**：位置取决于参数类型（对象或数组）。

**正确示例**：

```javascript
function example(a, b = 10, ...rest) {
  // 合法：默认参数在中间，剩余参数在最后
}
```

**错误示例**：

```javascript
function error(...rest, a) {
  // 错误：剩余参数必须在最后
}
```

### 六、实际应用场景

#### 1. **合并配置对象**

```javascript
function initApp(config = {}) {
  const defaultConfig = {
    host: "localhost",
    port: 3000,
    debug: false,
  };

  const finalConfig = { ...defaultConfig, ...config };
  // 使用 finalConfig 初始化应用
}
```

#### 2. **函数柯里化**

```javascript
const add = (a) => (b) => a + b;
console.log(add(5)(3)); // 8
```

#### 3. **动态参数处理**

```javascript
function log(message, ...args) {
  console.log(message, ...args);
}

log("Error:", 500, "Internal Server Error");
// 输出: Error: 500 Internal Server Error
```

### 七、注意事项

1. **默认参数的计算时机**

   - 默认参数在函数调用时计算，每次调用可能不同：

     ```javascript
     function getTime(time = Date.now()) {
       return time;
     }

     console.log(getTime()); // 第一次调用的时间
     console.log(getTime()); // 第二次调用的时间（不同）
     ```

2. **剩余参数与 arguments 的区别**

   - `arguments` 是类数组对象，不具备数组方法；剩余参数是真正的数组。

3. **扩展运算符的浅拷贝特性**
   - 使用 `...` 复制对象或数组时，仅复制一层，嵌套对象仍为引用：
     ```javascript
     const original = { a: { b: 1 } };
     const copy = { ...original };
     copy.a.b = 2;
     console.log(original.a.b); // 2（引用被修改）
     ```
