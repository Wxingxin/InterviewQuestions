éå¸¸å¥½çš„é—®é¢˜ ğŸ‘ï¼Œä½ å·²ç»å‘ç°äº† **JavaScript æ„é€ å‡½æ•° + åŸå‹æœºåˆ¶** çš„æ ¸å¿ƒåŒºåˆ«ã€‚
æˆ‘ä»¬æ¥å¯¹æ¯”ä½ è¿™ä¸¤æ®µä»£ç çš„**æœ¬è´¨åŒºåˆ«**ï¼š

---

## ğŸ§© ä¸€ã€ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼ˆä½¿ç”¨ `prototype`ï¼‰

```js
function Student(name, age, sno) {
  this.name = name
  this.age = age
  this.sno = sno
}

Student.prototype.running = function() {
  console.log(this.name + " running")
}
Student.prototype.eating = function() {
  console.log(this.name + " eating")
}
Student.prototype.studying = function() {
  console.log(this.name + " studying")
}

const stu1 = new Student("why", 12, 111)
const stu2 = new Student("wei", 22, 666)

console.log(stu1.running === stu2.running) // true
```

### âœ… è¿è¡Œç»“æœï¼š`true`

### ğŸ’¡ åŸç†åˆ†æï¼š

* æ‰€æœ‰é€šè¿‡ `new Student()` åˆ›å»ºçš„å¯¹è±¡ï¼Œéƒ½ä¼š**å…±äº«åŒä¸€ä¸ªåŸå‹å¯¹è±¡**ï¼š

  ```js
  stu1.__proto__ === Student.prototype
  stu2.__proto__ === Student.prototype
  ```
* `running`ã€`eating`ã€`studying` è¿™äº›æ–¹æ³•éƒ½å®šä¹‰åœ¨ `Student.prototype` ä¸Šã€‚
  æ‰€ä»¥å®ƒä»¬åœ¨å†…å­˜ä¸­åªæœ‰**ä¸€ä»½**ï¼Œæ‰€æœ‰å®ä¾‹å…±äº«ã€‚

ğŸ‘‰ å› æ­¤ï¼š

```js
stu1.running === stu2.running // trueï¼ˆå¼•ç”¨åŒä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼‰
```

### ğŸ“¦ ä¼˜ç‚¹ï¼š

* èŠ‚çœå†…å­˜ï¼ˆæ–¹æ³•ä¸ä¼šé‡å¤åˆ›å»ºï¼‰
* æ‰€æœ‰å®ä¾‹å…±äº«è¡Œä¸ºï¼ˆç¬¦åˆâ€œç±»â€çš„æ¦‚å¿µï¼‰

---

## âš™ï¸ äºŒã€ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼ˆæ–¹æ³•å®šä¹‰åœ¨æ„é€ å‡½æ•°ä¸­ï¼‰

```js
function Student(name, age, sno) {
  this.name = name
  this.age = age
  this.sno = sno

  this.running = function() {
    console.log(this.name + " running")
  }
  this.eating = function() {
    console.log(this.name + " eating")
  }
  this.studying = function() {
    console.log(this.name + " studying")
  }
}

const stu1 = new Student("why", 12, 111)
const stu2 = new Student("wei", 22, 666)

console.log(stu1.running === stu2.running) // false
```

### âœ… è¿è¡Œç»“æœï¼š`false`

### ğŸ’¡ åŸç†åˆ†æï¼š

* æ¯æ¬¡æ‰§è¡Œ `new Student()` æ—¶ï¼Œ`this.running` éƒ½ä¼šè¢«**é‡æ–°åˆ›å»ºä¸€æ¬¡**ã€‚
* ä¹Ÿå°±æ˜¯è¯´ï¼Œ`stu1.running` å’Œ `stu2.running` æ˜¯**ä¸¤ä¸ªä¸åŒçš„å‡½æ•°å¯¹è±¡**ã€‚

ğŸ‘‰ å› æ­¤ï¼š

```js
stu1.running === stu2.running // falseï¼ˆä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°ï¼‰
```

### ğŸ“¦ ç¼ºç‚¹ï¼š

* æ¯ä¸ªå®ä¾‹éƒ½ä¼šæ–°å»ºä¸€ä»½æ–¹æ³• â†’ **æµªè´¹å†…å­˜**
* æ–¹æ³•é€»è¾‘ç›¸åŒï¼Œå´é‡å¤å­˜åœ¨äºæ¯ä¸ªå¯¹è±¡ä¸­

---

## ğŸ§  æ€»ç»“å¯¹æ¯”è¡¨

| å¯¹æ¯”ç‚¹                             | ä½¿ç”¨ `prototype`      | åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰     |
| :------------------------------ | :------------------ | :----------- |
| æ–¹æ³•å­˜å‚¨ä½ç½®                          | `Student.prototype` | æ¯ä¸ªå¯¹è±¡çš„å®ä¾‹ä¸Š     |
| æ˜¯å¦å…±äº«                            | âœ… å…±äº«åŒä¸€ä¸ªå‡½æ•°           | âŒ æ¯ä¸ªå®ä¾‹éƒ½æœ‰ç‹¬ç«‹å‡½æ•° |
| å†…å­˜å ç”¨                            | è¾ƒå°‘ï¼ˆ1ä»½å‡½æ•°ï¼‰            | è¾ƒå¤šï¼ˆæ¯ä¸ªå¯¹è±¡éƒ½ä¸€ä»½ï¼‰  |
| `stu1.running === stu2.running` | âœ… true              | âŒ false      |
| å¸¸è§ç”¨é€”                            | å®šä¹‰â€œå…¬å…±æ–¹æ³•â€            | å®šä¹‰â€œå®ä¾‹ç‹¬æœ‰å±æ€§â€   |

---

## ğŸ§© ç±»æ¯”ï¼ˆES6 `class`ï¼‰

å…¶å®åœ¨ ES6 çš„ `class` ä¸­ï¼š

```js
class Student {
  constructor(name, age, sno) {
    this.name = name
    this.age = age
    this.sno = sno
  }
  running() { console.log(this.name + " running") }
}
```

ç­‰ä»·äºç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼ˆæ–¹æ³•å­˜åœ¨ `prototype` ä¸Šï¼‰ã€‚

---

è¦ä¸è¦æˆ‘å¸®ä½ ç”»ä¸€å¼ å›¾ï¼Œç›´è§‚å±•ç¤ºâ€œæ„é€ å‡½æ•°é‡Œçš„æ–¹æ³•â€å’Œâ€œåŸå‹æ–¹æ³•â€çš„å†…å­˜ç»“æ„åŒºåˆ«ï¼Ÿ
# prototype

éå¸¸å¥½ ğŸ‘ ä½ è¿™ä¸ªé—®é¢˜é—®å¾—éå¸¸æœ‰æ·±åº¦ã€‚
æˆ‘ä»¬æ¥ç³»ç»Ÿè®²è§£ä¸€ä¸‹ï¼š**â€œä¸€ä¸ªå‡½æ•°çš„ prototype éƒ½æœ‰ä»€ä¹ˆâ€** â€”â€” åŒ…æ‹¬é»˜è®¤ç»“æ„ã€å¸¸è§å±æ€§ã€å¸¸è§ç”¨æ³•ã€å¯è‡ªå®šä¹‰å†…å®¹å’Œä¸ `__proto__` çš„å…³ç³»ã€‚

---

## ğŸ§© ä¸€ã€å‰æï¼šæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§

åœ¨ JavaScript ä¸­ï¼š

```js
function Foo() {}
```

å®ƒè‡ªåŠ¨ä¼šè¢«ç³»ç»Ÿæ·»åŠ ä¸€ä¸ªé»˜è®¤çš„åŸå‹å¯¹è±¡ï¼š

```js
Foo.prototype = {
  constructor: Foo
}
```

æ‰€ä»¥ï¼š

```js
typeof Foo.prototype // "object"
Foo.prototype.constructor === Foo // true âœ…
```

ä¹Ÿå°±æ˜¯è¯´ï¼š

> å‡½æ•°çš„ `prototype` æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œç”¨äºå­˜æ”¾ç”±è¯¥å‡½æ•°åˆ›å»ºçš„å®ä¾‹æ‰€**å…±äº«çš„å±æ€§å’Œæ–¹æ³•**ã€‚

---

## ğŸ§  äºŒã€å‡½æ•°çš„ prototype é»˜è®¤éƒ½åŒ…å«ä»€ä¹ˆ

| åç§°            | ç±»å‹       | è¯´æ˜                |
| :------------ | :------- | :---------------- |
| `constructor` | å‡½æ•°       | æŒ‡å›è¯¥å‡½æ•°æœ¬èº«ï¼ˆæ¯”å¦‚ `Foo`ï¼‰ |
| å…¶å®ƒå±æ€§          | æ— ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ | é™¤éä½ è‡ªå·±æ·»åŠ            |

ä¾‹å¦‚ï¼š

```js
function Person() {}

console.log(Person.prototype)
// ğŸ‘‰ è¾“å‡ºï¼š{ constructor: Æ’ Person() }
```

---

## ğŸ§© ä¸‰ã€æˆ‘ä»¬å¯ä»¥å¾€ prototype ä¸ŠåŠ ä»€ä¹ˆï¼ˆè‡ªå®šä¹‰ï¼‰

prototype æ˜¯ä¸ªæ™®é€šå¯¹è±¡ï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢æ·»åŠ ä»»æ„å±æ€§æˆ–æ–¹æ³•ï¼š

```js
function Person(name) {
  this.name = name
}

Person.prototype.sayHello = function() {
  console.log(this.name + " says hello")
}

Person.prototype.age = 18
Person.prototype.school = "Tsinghua"

console.log(Person.prototype)
/*
{
  constructor: Æ’ Person(),
  sayHello: Æ’,
  age: 18,
  school: "Tsinghua"
}
*/
```

---

## âš™ï¸ å››ã€æ„é€ å‡½æ•°ã€prototypeã€å®ä¾‹ ä¸‰è€…å…³ç³»å›¾

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚        Function Foo      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
              prototype å±æ€§
                      â”‚
                      â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Foo.prototype = {        â”‚
          â”‚   constructor: Foo,      â”‚
          â”‚   ... è‡ªå®šä¹‰æ–¹æ³• ...      â”‚
          â”‚ }                        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–²
                      â”‚
                __proto__
                      â”‚
                      â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  const obj = new Foo()   â”‚
          â”‚  obj.__proto__ === Foo.prototypeâ”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© äº”ã€å¸¸è§å†…ç½®å‡½æ•°çš„ prototype å†…å®¹ï¼ˆå¯¹æ¯”ï¼‰

| å‡½æ•°         | prototype ä¸Šçš„å¸¸è§å±æ€§/æ–¹æ³•                                             |
| ---------- | --------------------------------------------------------------- |
| `Object`   | `constructor`, `toString`, `hasOwnProperty`, `isPrototypeOf`, â€¦ |
| `Array`    | `push`, `pop`, `map`, `filter`, `forEach`, â€¦                    |
| `Function` | `apply`, `call`, `bind`, â€¦                                      |
| `Date`     | `getFullYear`, `getMonth`, `toLocaleString`, â€¦                  |
| `String`   | `charAt`, `indexOf`, `slice`, `toUpperCase`, â€¦                  |

è¿™äº›æ–¹æ³•å…¶å®éƒ½å®šä¹‰åœ¨å¯¹åº”çš„ `prototype` ä¸Šï¼Œè€Œä¸æ˜¯æ¯ä¸ªå®ä¾‹è‡ªèº«ä¸Šã€‚

---

## ğŸ§© å…­ã€ä¸ `__proto__` çš„åŒºåˆ«

| é¡¹ç›®   | `prototype` | `__proto__`       |
| ---- | ----------- | ----------------- |
| æ‰€å±å¯¹è±¡ | å‡½æ•°æ‰æœ‰        | æ‰€æœ‰å¯¹è±¡éƒ½æœ‰            |
| ç”¨é€”   | ç”¨äºè¢«å®ä¾‹ç»§æ‰¿     | æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype |
| ç±»å‹   | å¯¹è±¡          | å¯¹è±¡                |
| å¸¸ç”¨åœºæ™¯ | å®šä¹‰å…±äº«æ–¹æ³•      | æŸ¥çœ‹åŸå‹é“¾å…³ç³»           |

ä¾‹å¦‚ï¼š

```js
function Foo() {}
const f1 = new Foo()

console.log(Foo.prototype === f1.__proto__) // âœ… true
```

---

## ğŸ§  ä¸ƒã€prototype çš„å®Œæ•´â€œæ“ä½œå¤§å…¨â€

| æ“ä½œ             | è¯´æ˜                                     | ç¤ºä¾‹                                             |
| -------------- | -------------------------------------- | ---------------------------------------------- |
| æ·»åŠ æ–¹æ³•           | ç»™æ‰€æœ‰å®ä¾‹æ·»åŠ å…±äº«è¡Œä¸º                            | `Foo.prototype.sayHi = fn`                     |
| æ·»åŠ å±æ€§           | ç»™æ‰€æœ‰å®ä¾‹å…±äº«å±æ€§                              | `Foo.prototype.type = "person"`                |
| é‡å†™åŸå‹å¯¹è±¡         | æ›¿æ¢æ•´ä¸ªåŸå‹                                 | `Foo.prototype = { ... }`                      |
| é‡è®¾ constructor | é‡å†™ prototype åè®°å¾—æ¢å¤                     | `Foo.prototype.constructor = Foo`              |
| è®¿é—®åŸå‹           | é€šè¿‡å®ä¾‹                                   | `obj.__proto__` æˆ– `Object.getPrototypeOf(obj)` |
| æ£€æŸ¥å±æ€§æ¥æº         | åˆ¤æ–­æ˜¯å¦æ¥è‡ªåŸå‹                               | `obj.hasOwnProperty("x")`                      |
| ä¿®æ”¹åŸå‹é“¾          | `Object.setPrototypeOf(obj, newProto)` |                                                |

---

## âœ… æ€»ç»“ä¸€å¥è¯

> **å‡½æ•°çš„ `prototype` æ˜¯ä¸€ä¸ªç”¨æ¥ç»™å®ä¾‹å¯¹è±¡å…±äº«æ–¹æ³•å’Œå±æ€§çš„å¯¹è±¡ã€‚**
>
> é»˜è®¤åªåŒ…å«ä¸€ä¸ª `constructor`ï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢æ·»åŠ å„ç§å…¬å…±å±æ€§ä¸æ–¹æ³•ï¼Œå®ä¾‹ä¼šé€šè¿‡åŸå‹é“¾è®¿é—®å®ƒä»¬ã€‚

### é‡å†™prototype
ç±»ä¼¼arrayï¼Œstring çš„åŸºæœ¬æ•°å­—ç±»å‹æ˜¯å›ºå®šçš„
```js
Person.prototype = {
    constructor: Person,//å’Œé»˜è®¤çš„ä¸ä¸€æ ·
    message:"hello Person",
    info:{name:"gao and wei"},
    running: function(){},
    eating: function(){},
}
```

```js
Person.prototype = {
    message:"hello Person",
    info:{name:"gao and wei"},
    running: function(){},
    eating: function(){},
}

Object.defineProperty(Person.prototype,"constructor",{
  value: Person
})
```