# ğŸ’¯ğŸ’¯ğŸ’¯`typeof` åŸºæœ¬è¯­æ³•

```js
typeof operand;
```

æˆ–æ›´å¸¸è§å½¢å¼ï¼š

```js
typeof operand;
```

ä¸¤è€…å®Œå…¨ç­‰ä»·ã€‚

---

### 1. JavaScript çš„ç±»å‹åªæœ‰ 8 ç§ï¼ˆES2020 åï¼‰

| ç±»å‹       | æ˜¯å¦åŸå§‹ç±»å‹ï¼ˆPrimitiveï¼‰ | typeof è¿”å›å€¼         | å¤‡æ³¨                       |
| ---------- | ------------------------- | --------------------- | -------------------------- |
| undefined  | æ˜¯                        | "undefined"           |                            |
| null       | æ˜¯                        | "object" ï¼ˆå†å² bugï¼‰ | ç‰¹æ®Šï¼                     |
| boolean    | æ˜¯                        | "boolean"             |                            |
| number     | æ˜¯                        | "number"              |                            |
| bigint     | æ˜¯                        | "bigint"              |                            |
| string     | æ˜¯                        | "string"              |                            |
| symbol     | æ˜¯                        | "symbol"              |                            |
| **object** | å¦                        | "object"              | æ‰€æœ‰éåŸå§‹ç±»å‹éƒ½å±äºè¿™ä¸€ç±» |

æ‰€ä»¥ç»“è®ºï¼š**é™¤äº†ä¸Šé¢ 7 ä¸ªåŸå§‹ç±»å‹ä¹‹å¤–ï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½æ˜¯ object ç±»å‹**ã€‚

### 2. å¸¸è§â€œéåŸå§‹ç±»å‹â€éƒ½æ˜¯å¯¹è±¡ï¼ˆé‡ç‚¹è®°å¿†ï¼‰

| å€¼                 | typeof ç»“æœ | å®é™…ç±»å‹ï¼ˆ[[Class]]ï¼‰ | è¯´æ˜           |
| ------------------ | ----------- | --------------------- | -------------- |
| {}                 | "object"    | Object                | æ™®é€šå¯¹è±¡       |
| []                 | "object"    | Array                 | æ•°ç»„æ˜¯å¯¹è±¡     |
| function() {}      | "function"  | Function              | å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼ |
| new Date()         | "object"    | Date                  |                |
| new Map()          | "object"    | Map                   |                |
| new Set()          | "object"    | Set                   |                |
| new RegExp()       | "object"    | RegExp                |                |
| new Promise()      | "object"    | Promise               |                |
| new Error()        | "object"    | Error                 |                |
| async function     | "function"  | AsyncFunction         |                |
| Generator function | "function"  | GeneratorFunction     |                |

# ğŸ“Œ äºŒã€`typeof` çš„æ‰€æœ‰å¯èƒ½è¿”å›å€¼ï¼ˆå…± 8 ç§ï¼‰

| è¿”å›å€¼        | è¯´æ˜                  | ç¤ºä¾‹                       |
| ------------- | --------------------- | -------------------------- |
| `"number"`    | æ•°å­—ï¼ˆåŒ…æ‹¬ NaNï¼‰      | `typeof 1`                 |
| `"string"`    | å­—ç¬¦ä¸²                | `typeof "abc"`             |
| `"boolean"`   | å¸ƒå°”å€¼                | `typeof true`              |
| `"undefined"` | æœªå®šä¹‰                | `typeof undefined`         |
| `"object"`    | å¯¹è±¡ç±»å‹ï¼ˆå« nullï¼ï¼‰ | `typeof {}`, `typeof null` |
| `"function"`  | å‡½æ•°                  | `typeof function(){}`      |
| `"symbol"`    | ES6 Symbol            | `typeof Symbol()`          |
| `"bigint"`    | å¤§æ•´æ•°ç±»å‹            | `typeof 123n`              |

---

---

## âœ”ï¸ 3. å‡½æ•°åŠå¯è°ƒç”¨å¯¹è±¡

```js
typeof function(){}       // "function"
typeof class A{}          // "function"
typeof () => {}           // "function"
typeof Math.sin           // "function"
```

> æ³¨æ„ï¼š**class æœ¬è´¨ä¸Šä¹Ÿæ˜¯å‡½æ•°**ã€‚

---

## âœ”ï¸ 4. æœªå£°æ˜å˜é‡

```js
typeof foo; // "undefined" ï¼ˆä¸ä¼šæŠ¥é”™ï¼‰
```

è¿™ç‚¹éå¸¸é‡è¦ï¼Œå¯ä»¥å®‰å…¨åœ°åˆ¤æ–­å˜é‡æ˜¯å¦å­˜åœ¨ã€‚

---

# ğŸ“Œ å››ã€`typeof` çš„ä¼˜ç‚¹

| ç‰¹æ€§               | æè¿°                                           |
| ------------------ | ---------------------------------------------- |
| å®‰å…¨åˆ¤æ–­æœªå£°æ˜å˜é‡ | `typeof x === "undefined"` ä¸æŠ¥ ReferenceError |
| ç®€å•ã€è½»é‡         | åŸºç¡€ç±»å‹åˆ¤æ–­å¾ˆæ–¹ä¾¿                             |
| å¯åˆ¤æ–­å‡½æ•°ç±»å‹     | `typeof fn === 'function'`                     |
| æ”¯æŒ ES6+ ç±»å‹     | bigint, symbol                                 |

---

# ğŸ“Œ äº”ã€`typeof` çš„ç¼ºé™·ä¸å‘ç‚¹ï¼ˆåŠ¡å¿…æ³¨æ„ï¼‰

## âŒ 1. æ— æ³•åŒºåˆ†å¯¹è±¡ç±»å‹

```js
typeof []; // "object"
typeof {}; // "object"
typeof null; // "object"
```

> ä¸èƒ½ç”¨æ¥åˆ¤æ–­æ•°ç»„ã€æ—¥æœŸã€æ­£åˆ™ç­‰ã€‚

---

## âŒ 2. å¯¹ null è¿”å› `"object"`ï¼ˆJS å†å² bugï¼‰

è¿™æ˜¯ JS æœ€è‡­åæ˜­è‘—çš„â€œè¯­è¨€å…«å¤§å‘â€ä¹‹ä¸€ã€‚

---

## âŒ 3. `typeof NaN` è¿”å› `"number"`

```js
typeof NaN; // "number"
```

åˆ¤æ–­ NaN åº”ä½¿ç”¨ `Number.isNaN()`ã€‚

---

## âŒ 4. æ‰€æœ‰ class éƒ½è¿”å› `"function"`

```js
class A {}
typeof A; // "function"
```

---

# ğŸ“Œ å…­ã€`typeof` ä½¿ç”¨åœºæ™¯ï¼ˆæœ€ä½³å®è·µï¼‰

## â­ 1. åˆ¤æ–­åŸºç¡€ç±»å‹

```js
if (typeof name === "string") { ... }
```

## â­ 2. åˆ¤æ–­å‡½æ•°ï¼ˆæœ€å¸¸ç”¨ï¼‰

```js
if (typeof callback === "function") { ... }
```

## â­ 3. åˆ¤æ–­å˜é‡æ˜¯å¦å£°æ˜è¿‡ï¼ˆä¸ä¼šæŠ¥é”™ï¼‰

```js
if (typeof window.foo === "undefined") {
  // safe
}
```

## â­ 4. æ¨¡å—åˆ¤æ–­ï¼ˆå¦‚ Node/æµè§ˆå™¨ï¼‰

```js
if (typeof window !== "undefined") {
  // è¿è¡Œåœ¨æµè§ˆå™¨
}
```

## â­ 5. åˆ¤æ–­ BigInt / Symbol

```js
if (typeof id === "bigint") { ... }
```

---

# ğŸ“Œ å…«ã€è¡¥å……ï¼šåˆ¤æ–­æ‰€æœ‰ç±»å‹çš„æ›´å¼ºæ–¹å¼ï¼ˆç›¸æ¯” typeof æ›´å¯é ï¼‰

å¦‚æœä½ éœ€è¦åˆ¤æ–­â€œç²¾ç¡®ç±»å‹â€ï¼Œæ¨èç”¨ï¼š

```js
Object.prototype.toString.call(value);
```

ä¹Ÿå¯ä»¥å°è£…æˆï¼š

```js
const type = (v) => Object.prototype.toString.call(v).slice(8, -1);
```

# ğŸ’¯ğŸ’¯ğŸ’¯`Object.prototype.toString.call(value)` åŸºæœ¬è¯­æ³•

`Object.prototype.toString.call(value)` æ˜¯ JavaScript ä¸­**æœ€å¼ºå¤§ã€æœ€å¯é ã€æœ€ä¸‡èƒ½çš„ç±»å‹åˆ¤æ–­æ–¹æ³•**ï¼Œè¢«æ‰€æœ‰å¤§å‚ã€æ‰€æœ‰æ¡†æ¶ã€æ‰€æœ‰å·¥å…·åº“ï¼ˆVueã€Reactã€lodashã€axios ç­‰ï¼‰å†…éƒ¨å¹¿æ³›ä½¿ç”¨ã€‚

å®ƒè¢«ç§°ä¸ºâ€œç±»å‹åˆ¤æ–­ç»ˆææ­¦å™¨â€ï¼Œä¸€å¥è¯æ€»ç»“ï¼š

> **åªè¦ä½ ä¸çŸ¥é“ç”¨ä»€ä¹ˆåˆ¤æ–­ç±»å‹ï¼Œå°±ç”¨ `Object.prototype.toString.call()`ï¼Œæ°¸è¿œä¸ä¼šé”™ï¼**

### ä¸€ã€ä¸ºä»€ä¹ˆè¿™ä¹ˆç‰›ï¼Ÿæ ¸å¿ƒåŸç†

æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ `toString` æ–¹æ³•ï¼Œä½†ç›´æ¥è°ƒç”¨ä¼šè¢«å­ç±»é‡å†™ï¼ˆæ¯”å¦‚æ•°ç»„çš„ `[1,2,3].toString()` â†’ "1,2,3"ï¼‰ã€‚

è€Œ `Object.prototype.toString()` æ˜¯â€œåŸå§‹ç‰ˆæœ¬â€ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ ‡å‡†æ ¼å¼çš„å­—ç¬¦ä¸²ï¼š

```js
"[object XXX]";
```

å…¶ä¸­ XXX å°±æ˜¯å¯¹è±¡çš„**å†…éƒ¨ [[Class]] å±æ€§**ï¼ˆè¿™æ˜¯ JS å¼•æ“å†…éƒ¨çœŸå®ç±»å‹æ ‡è®°ï¼‰ã€‚

æˆ‘ä»¬ç”¨ `call` å¼ºè¡Œè®©è¿™ä¸ªåŸå§‹ç‰ˆæœ¬ä½œç”¨åœ¨ä»»æ„å€¼ä¸Šï¼Œå°±èƒ½æ‹¿åˆ°æœ€å‡†ç¡®çš„ç±»å‹ã€‚

### äºŒã€å®Œæ•´è¿”å›ç»“æœå¯¹ç…§è¡¨ï¼ˆ2025 å¹´æœ€æ–°ï¼Œå¿…èƒŒï¼ï¼‰

| å€¼                      | Object.prototype.toString.call(value) | ç»“æœï¼ˆå¸¸ç”¨åˆ«åï¼‰  |
| ----------------------- | ------------------------------------- | ----------------- |
| `undefined`             | "[object Undefined]"                  | Undefined         |
| `null`                  | "[object Null]"                       | Null              |
| `true / false`          | "[object Boolean]"                    | Boolean           |
| `123 / NaN / Infinity`  | "[object Number]"                     | Number            |
| `9007199254740999n`     | "[object BigInt]"                     | BigInt            |
| `"hello"`               | "[object String]"                     | String            |
| `Symbol('a')`           | "[object Symbol]"                     | Symbol            |
| `{}`                    | "[object Object]"                     | Object            |
| `[]`                    | "[object Array]"                      | Array             |
| `() => {}`              | "[object Function]"                   | Function          |
| `async () => {}`        | "[object AsyncFunction]"              | AsyncFunction     |
| `function* () {}`       | "[object GeneratorFunction]"          | GeneratorFunction |
| `new Date()`            | "[object Date]"                       | Date              |
| `/abc/g`                | "[object RegExp]"                     | RegExp            |
| `new Error()`           | "[object Error]"                      | Error             |
| `new Map()`             | "[object Map]"                        | Map               |
| `new Set()`             | "[object Set]"                        | Set               |
| `new WeakMap()`         | "[object WeakMap]"                    | WeakMap           |
| `new WeakSet()`         | "[object WeakSet]"                    | WeakSet           |
| `new Promise(() => {})` | "[object Promise]"                    | Promise           |
| `new Int32Array()`      | "[object Int32Array]"                 | Int32Array        |
| `arguments`             | "[object Arguments]"                  | Arguments         |

### ä¸‰ã€ç»ˆæå°è£…ï¼ˆæ‰€æœ‰å¤§å‚éƒ½è¿™ä¹ˆå†™ï¼‰

```js
function getType(val) {
  return Object.prototype.toString.call(val).slice(8, -1);
  // slice(8, -1) æŠŠ "[object " å’Œ "]" åˆ‡æ‰
}

// å†å°è£…å¸¸ç”¨åˆ¤æ–­å‡½æ•°
const isArray = (val) => getType(val) === "Array";
const isObject = (val) => getType(val) === "Object";
const isFunction = (val) =>
  getType(val) === "Function" || getType(val) === "AsyncFunction";
const isPromise = (val) => getType(val) === "Promise";
const isNull = (val) => getType(val) === "Null";
const isUndefined = (val) => getType(val) === "Undefined";
const isMap = (val) => getType(val) === "Map";
const isDate = (val) => getType(val) === "Date";
```

### å››ã€å’Œå…¶å®ƒæ–¹æ³•çš„ç»ˆæå¯¹æ¯”è¡¨ï¼ˆé¢è¯•å¿…èƒŒï¼‰

| åˆ¤æ–­æ–¹æ³•                           | èƒ½å¦åˆ¤æ–­ null         | èƒ½å¦åˆ¤æ–­æ•°ç»„         | è·¨ iframe | æ˜¯å¦æœ€å‡†ç¡® | æ¨èæŒ‡æ•°              |
| ---------------------------------- | --------------------- | -------------------- | --------- | ---------- | --------------------- |
| `Object.prototype.toString.call()` | Yes                   | Yes                  | Yes       | Yes        | 5 stars               |
| `Array.isArray()`                  | â€”                     | Yes                  | Yes       | Yes        | 5 starsï¼ˆä»…æ•°ç»„ï¼‰     |
| `instanceof Array`                 | â€”                     | Noï¼ˆè·¨ iframe å¤±æ•ˆï¼‰ | No        | No         | 2 stars               |
| `typeof`                           | Noï¼ˆnull æ˜¯"object"ï¼‰ | Noï¼ˆæ•°ç»„æ˜¯"object"ï¼‰ | Yes       | No         | 3 starsï¼ˆä»…åŸå§‹ç±»å‹ï¼‰ |
| `constructor === Array`            | â€”                     | Noï¼ˆå¯è¢«ç¯¡æ”¹ï¼‰       | Yes       | No         | 1 star                |

### äº”ã€çœŸå®é¡¹ç›®ä¸­ 100% ä¼šç”¨åˆ°å®ƒçš„åœºæ™¯

```js
// Vue3 æºç é‡Œåˆ¤æ–­æ˜¯å¦ä¸ºæ™®é€šå¯¹è±¡
function isPlainObject(val) {
  return Object.prototype.toString.call(val) === '[object Object]';
}

// lodash å†…éƒ¨åˆ¤æ–­ç±»å‹
_.isArray = Array.isArray || function() { ...toString.call... }

// axios åˆ¤æ–­æ˜¯å¦æ˜¯ FormDataã€Blob ç­‰
Object.prototype.toString.call(obj) === '[object FormData]'

// React åˆ¤æ–­ children ç±»å‹
```

### å…­ã€ç»ˆæç»“è®ºï¼ˆèƒŒä¸‹æ¥å°±æ— æ•Œï¼‰

| ä½ æƒ³åˆ¤æ–­ä»€ä¹ˆç±»å‹ï¼Ÿ          | æ°¸è¿œå†™è¿™å¥å°±å¯¹äº†                                    |
| --------------------------- | --------------------------------------------------- |
| ä»»ä½•ç±»å‹                    | `Object.prototype.toString.call(val)`               |
| åˆ¤æ–­æ˜¯ä¸æ˜¯çœŸæ•°ç»„            | `Array.isArray(val)`ï¼ˆé¦–é€‰ï¼‰<br>å¤‡é€‰ï¼štoString.call |
| åˆ¤æ–­æ˜¯ä¸æ˜¯æ™®é€šå¯¹è±¡ {}       | `toString.call(val) === '[object Object]'`          |
| åˆ¤æ–­ null                   | `val === null`ï¼ˆæœ€å¿«ï¼‰<br>æˆ– toString.call          |
| åˆ¤æ–­ Promise / Map / Set ç­‰ | åªèƒ½ç”¨ toString.call                                |

**2025 å¹´è®°ä½ä¸€å¥è¯å°±å¤Ÿäº†ï¼š**

> **å¤©ä¸‹ç±»å‹ï¼Œæœ‰ä¸”åªæœ‰ `Object.prototype.toString.call()` èƒ½ä¸€ç»Ÿï¼**  
> å…¶ä»–æ‰€æœ‰åˆ¤æ–­æ–¹æ³•ï¼ˆinstanceofã€typeofã€constructorï¼‰éƒ½æœ‰å‘ï¼Œåªæœ‰è¿™ä¸€æ‹›æ°¸ä¸ç¿»è½¦ï¼

ä»ä»Šå¤©èµ·ï¼Œä½ å†™åˆ¤æ–­ç±»å‹çš„ä»£ç æ°¸è¿œåªæœ‰ä¸¤è¡Œï¼š

```js
const toString = Object.prototype.toString.call.bind(Object.prototype.toString);

toString(value) === "[object Array]"; // åˆ¤æ–­æ•°ç»„
toString(value) === "[object Object]"; // åˆ¤æ–­çº¯å¯¹è±¡
toString(value) === "[object Promise]"; // åˆ¤æ–­ Promise
```

# ğŸ’¯ğŸ’¯ğŸ’¯`Array.isArray`

### ä¸€ã€åŸºæœ¬ç”¨æ³•ï¼ˆç®€å•åˆ°çˆ†ï¼‰

```js
Array.isArray(value);
```

- è¿”å› `true` â†’ ä¸€å®šæ˜¯æ•°ç»„
- è¿”å› `false` â†’ ä¸€å®šä¸æ˜¯æ•°ç»„

```js
Array.isArray([]); // true
Array.isArray([1, 2, 3]); // true
Array.isArray(new Array(5)); // true

Array.isArray({}); // false
Array.isArray("abc"); // false
Array.isArray(undefined); // false
Array.isArray(null); // false
Array.isArray(123); // false
Array.isArray(true); // false
Array.isArray(() => {}); // false
Array.isArray({ __proto__: Array.prototype }); // falseï¼ç±»æ•°ç»„
```

### äºŒã€ä¸ºä»€ä¹ˆå¿…é¡»ç”¨ Array.isArrayï¼Ÿï¼ˆå…¶ä»–æ–¹æ³•å…¨éƒ½æœ‰å‘ï¼‰

| åˆ¤æ–­æ–¹æ³•                                                     | é—®é¢˜ï¼ˆä¼šè¢«å‘æ­»çš„ä¾‹å­ï¼‰        | ç»“æœ     |
| ------------------------------------------------------------ | ----------------------------- | -------- |
| `value instanceof Array`                                     | è·¨ iframe åˆ›å»ºçš„æ•°ç»„          | false    |
| `Object.prototype.toString.call(value) === '[object Array]'` | è™½ç„¶æœ€ç¨³ï¼Œä½†å†™èµ·æ¥å¤ªé•¿        | true     |
| `Array.prototype.isPrototypeOf(value)`                       | åŒ instanceofï¼Œè·¨ window å¤±æ•ˆ | false    |
| `value.constructor === Array`                                | å¯ä»¥è¢«æ”¹å†™æˆ–åˆ é™¤              | ä¸å®‰å…¨   |
| `typeof value === 'object'`                                  | å¯¹è±¡ã€nullã€æ•°ç»„éƒ½è¿”å› object | é”™å¾—ç¦»è°± |

çœŸå®æ¡ˆä¾‹ï¼ˆè·¨ iframe åœºæ™¯ï¼Œé¢è¯•å¿…è€ƒï¼‰ï¼š

```js
const iframe = document.createElement("iframe");
document.body.appendChild(iframe);
const foreignArray = iframe.contentWindow.Array;

// è¿™ä¸¤ä¸ª Array æ˜¯å®Œå…¨ä¸åŒçš„æ„é€ å‡½æ•°ï¼
foreignArray.isArray([]); // trueï¼ˆåŸç”Ÿæ”¯æŒï¼‰
foreignArray instanceof Array; // falseï¼ï¼
Array.is627Array(foreignArray); // trueï¼ˆå› ä¸ºåŸç”Ÿæ–¹æ³•èƒ½è¯†åˆ«ï¼‰
```

**ç»“è®ºï¼šåªæœ‰ `Array.isArray()` èƒ½è·¨ iframe æ­£ç¡®åˆ¤æ–­ï¼**

### å››ã€ä¸€å¼ å›¾è®°ä½æ‰€æœ‰åˆ¤æ–­æ•°ç»„çš„æ–¹æ³•å¯¹æ¯”ï¼ˆ2025 ç‰ˆï¼‰

| æ–¹æ³•                                                       | æ˜¯å¦æ¨è | è·¨ iframe | åŸå§‹ç±»å‹å®‰å…¨ | æ€§èƒ½ | å¤‡æ³¨           |
| ---------------------------------------------------------- | -------- | --------- | ------------ | ---- | -------------- |
| `Array.isArray(val)`                                       | â˜…â˜…â˜…â˜…â˜…    | æ”¯æŒ      | å®‰å…¨         | æœ€å¿« | å®˜æ–¹å”¯ä¸€æ¨è   |
| `val instanceof Array`                                     | â˜…â˜…       | ä¸æ”¯æŒ    | å®‰å…¨         | å¿«   | è·¨ window å¤±æ•ˆ |
| `Object.prototype.toString.call(val) === '[object Array]'` | â˜…â˜…â˜…â˜…     | æ”¯æŒ      | å®‰å…¨         | ç¨æ…¢ | æœ€ä¸‡èƒ½         |
| `val.constructor === Array`                                | â˜…        | æ”¯æŒ      | ä¸å®‰å…¨       | å¿«   | å®¹æ˜“è¢«æ”¹       |
| `Array.prototype.isPrototypeOf(val)`                       | â˜…â˜…       | ä¸æ”¯æŒ    | å®‰å…¨         | å¿«   | åŒ instanceof  |

### äº”ã€ç»ˆæç»“è®ºï¼ˆèƒŒä¸‹æ¥å°±æ— æ•Œäº†ï¼‰

| åœºæ™¯                   | æ°¸è¿œå†™è¿™ä¸ª                                       |
| ---------------------- | ------------------------------------------------ |
| ä»»ä½•æ—¶å€™åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°ç»„ | `Array.isArray(value)`                           |
| å†™å·¥å…·åº“ã€æ¡†æ¶ã€ç»„ä»¶   | `Array.isArray(value)`                           |
| é¢è¯•è¢«é—®æ€ä¹ˆåˆ¤æ–­æ•°ç»„   | â€œç”¨ Array.isArrayï¼Œå®ƒæ˜¯å”¯ä¸€è·¨ iframe æ­£ç¡®çš„æ–¹æ³•â€ |

ä¸€å¥è¯è®°ä½ï¼š

> **2025 å¹´äº†ï¼Œåˆ¤æ–­æ•°ç»„å°±åªç”¨ä¸€å¥è¯ï¼š`Array.isArray()`ï¼Œå…¶ä»–å…¨æ˜¯å‘ï¼**

# ğŸ’¯ğŸ’¯ğŸ’¯`instanceof` æ˜¯ä»€ä¹ˆï¼Ÿ

**ä½œç”¨ï¼š**
åˆ¤æ–­æŸä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œæ˜¯å¦å‡ºç°è¿‡æ„é€ å‡½æ•°çš„ `prototype`ã€‚

**è¯­æ³•ï¼š**

```js
A instanceof B;
```

å«ä¹‰ï¼š

> åˆ¤æ–­ **A çš„åŸå‹é“¾ä¸Š** æ˜¯å¦èƒ½æ‰¾åˆ° **B.prototype**ï¼Œè¿”å› `true` / `false`ã€‚

åœºæ™¯ï¼š

- èƒ½ç”¨ Array.isArrayã€typeofã€=== null å°±åˆ«ç”¨ instanceof
- éœ€è¦åˆ¤æ–­è‡ªå®šä¹‰ç±»å®ä¾‹æ—¶ï¼Œæ‰ç”¨ instanceof
- ä»»ä½•å¤æ‚åœºæ™¯ï¼Œä¸€å¾‹ä¸Š Object.prototype.toString.call() æœ€ç¨³ï¼

### 2. ç»å…¸æ­£ç¡®ç”¨æ³•ï¼ˆ99% åœºæ™¯éƒ½è¿™ä¹ˆå†™ï¼‰

| åœºæ™¯               | æ­£ç¡®å†™æ³•                | è¯´æ˜     |
| ------------------ | ----------------------- | -------- |
| åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„     | `arr instanceof Array`  | æœ€å¸¸è§   |
| åˆ¤æ–­æ˜¯å¦æ˜¯æ­£åˆ™     | `reg instanceof RegExp` |          |
| åˆ¤æ–­æ˜¯å¦æ˜¯æ—¥æœŸ     | `date instanceof Date`  |          |
| åˆ¤æ–­æ˜¯å¦æ˜¯ Map/Set | `map instanceof Map`    |          |
| åˆ¤æ–­è‡ªå®šä¹‰ç±»å®ä¾‹   | `p instanceof Person`   | ç»å…¸ OOP |
| åˆ¤æ–­æ˜¯å¦æ˜¯ Promise | `p instanceof Promise`  | æœ‰æ•ˆ     |

```js
[] instanceof Array          // true
[] instanceof Object         // trueï¼ï¼ˆæ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼‰
/abc/ instanceof RegExp      // true
new Date() instanceof Date   // true
new Map() instanceof Map     // true
```

### 3. æ‰€æœ‰å®¹æ˜“è¸©çš„å‘ï¼ˆé¢è¯•å¿…è€ƒï¼‰

| å‘å· | åœºæ™¯                                 | ç»“æœ       | åŸå›                       |
| ---- | ------------------------------------ | ---------- | ------------------------- |
| 1    | åŸå§‹ç±»å‹ç›´æ¥ç”¨ instanceof            | æ°¸è¿œ false | åŸå§‹ç±»å‹æ²¡æœ‰åŸå‹é“¾        |
|      | `"hello" instanceof String`          | false      | åŸå§‹å­—ç¬¦ä¸²ä¸æ˜¯å¯¹è±¡        |
|      | `123 instanceof Number`              | false      | åŒä¸Š                      |
| 2    | null æˆ– undefined                    | TypeError  | å·¦è¾¹å¿…é¡»æ˜¯å¯¹è±¡            |
|      | `null instanceof Object`             | æŠ¥é”™       |                           |
| 3    | è·¨ iframe / window åˆ›å»ºçš„å¯¹è±¡        | false      | åŸå‹é“¾ä¸å…±äº«              |
|      | `frame.Array instanceof Array`       | false      | ä¸¤ä¸ªä¸åŒçš„ Array æ„é€ å‡½æ•° |
| 4    | æ•°ç»„çš„â€œç¥–å…ˆâ€ä¹Ÿæ˜¯ Object              | true       | ç»§æ‰¿å…³ç³»                  |
|      | `[] instanceof Object`               | true       | å¸¸è¢«è¯¯ä»¥ä¸º false          |
| 5    | Symbol åŒ…è£…å¯¹è±¡                      | true       | ç‰¹æ®Š                      |
|      | `Object(Symbol()) instanceof Symbol` | false      | Symbol ä¸èƒ½ new           |
|      | `new String('a') instanceof String`  | true       | åŒ…è£…å¯¹è±¡æ‰æ˜¯å®ä¾‹          |
