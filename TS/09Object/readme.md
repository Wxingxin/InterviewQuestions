ä¸‹é¢æˆ‘ä¸ºä½ é“ºå¼€ä¸€æ•´å†Œ **ã€ŒTypeScript å¯¹è±¡ï¼ˆobjectï¼‰å­¦ä¹ å¤§å…¨ã€**ã€‚
å†…å®¹åƒä¸€å—é›•åˆ»ç»†è‡´çš„æœ¨æ¿ï¼šæœ‰çº¹ç†ï¼Œæœ‰å±‚æ¬¡ï¼Œä¹Ÿæœ‰éšç§˜çš„å°å‡¹æ§½â€”â€”æ¯ä¸ªéƒ½èƒ½è—ä¸‹ä¸€å¥å…³äºç±»å‹ç³»ç»Ÿçš„ç§˜å¯†ã€‚

è¿™ä»½æŒ‡å—å›Šæ‹¬ï¼š

> **object ç±»å‹ â†’ å¯¹è±¡å­—é¢é‡ â†’ ç´¢å¼•ç±»å‹ â†’ æ˜ å°„ç±»å‹ â†’ å†…ç½®å·¥å…·ç±»å‹ â†’ æ·±å±‚å¯¹è±¡ç±»å‹æŠ€å·§ â†’ é«˜é˜¶ç©æ³• â†’ å¸¸è§é™·é˜±**

éšä½ é˜…è¯»ï¼Œåƒç¿»ä¸€æœ¬å¯ä»¥é—»åˆ°æœ¨å±‘é¦™å‘³çš„æ‰‹å·¥ä¹¦ã€‚

---

# ğŸŒ¿ TypeScript å¯¹è±¡ï¼ˆobjectï¼‰å­¦ä¹ å¤§å…¨

**ï¼ˆå¯¹è±¡ç±»å‹åœ¨ TS ä¸–ç•Œçš„å…¨ç»´è§£è¯»ï¼‰**

---

# 0. â€œobjectâ€ åœ¨ TS åˆ°åº•æŒ‡ä»€ä¹ˆï¼Ÿ

é¦–å…ˆæ‹†å¼€ TS æœ€å®¹æ˜“è¢«è¯¯è§£çš„ç¬¦å·ï¼š

## **objectï¼ˆå°å†™ oï¼‰**

è¡¨ç¤ºï¼š

> ä»»ä½• *éåŸå§‹ç±»å‹å€¼*
> åŒ…æ‹¬æ•°ç»„ã€å‡½æ•°ã€å¯¹è±¡ã€Dateã€Mapâ€¦â€¦

```ts
let v: object
v = { a: 1 }
v = [1, 2, 3]
v = () => {}
```

**ä½†ä¸èƒ½èµ‹å€¼åŸå§‹ç±»å‹ï¼š**

```ts
v = 123      // âŒ
v = 'hi'     // âŒ
```

å®ƒéå¸¸å®½æ³›ï¼Œå¤§å¤šæ•°æ—¶å€™â€œä¸å¤Ÿç²¾ç¡®â€ã€‚

---

# 1. æ›´ç²¾ç¡®çš„å¯¹è±¡ç±»å‹ï¼šObject vs {} vs object

TS ä¸–ç•Œé‡Œæœ‰ä¸‰å…„å¼Ÿï¼š

| ç±»å‹       | èƒ½è¡¨ç¤ºä»€ä¹ˆ                | å¸¸è§ç”¨é€”    |
| -------- | -------------------- | ------- |
| `object` | æ‰€æœ‰â€œéåŸå§‹ç±»å‹â€            | è¾ƒå®½æ³›     |
| `Object` | JS çš„ Object ç±»å®ä¾‹      | å‡ ä¹ä¸ç”¨    |
| `{}`     | æ‰€æœ‰é null/undefined å€¼ | è¶…å®½æ³›ï¼Œä¸å»ºè®® |

ç¤ºä¾‹ï¼š

```ts
let a: {} = 123       // âœ” åŸºæœ¬ç±»å‹ä¹Ÿå¯ä»¥
let b: object = 123   // âŒ ä¸å¯
```

**ç»“è®ºï¼š**
ğŸŸ© é¡¹ç›®ä¸­â€œå¯¹è±¡â€çš„å‡†ç¡®ç±»å‹åº”è¯¥ç”¨ **ç±»å‹å­—é¢é‡** æˆ– **æ¥å£**ã€‚

---

# 2. å¯¹è±¡å­—é¢é‡ç±»å‹ï¼ˆæœ€å¸¸ç”¨ä¸æœ€é‡è¦ï¼‰

```ts
const user: {
  id: number
  name: string
} = {
  id: 1,
  name: 'Alice'
}
```

è¿™æ˜¯ TS çš„å¯¹è±¡è¡¨ç¤ºæ ¸å¿ƒæ–¹å¼ã€‚

---

## 2.1 å¯é€‰å±æ€§ (?)

```ts
type User = {
  id: number
  name?: string
}
```

---

## 2.2 åªè¯»å±æ€§ (readonly)

```ts
type User = {
  readonly id: number
}
```

---

## 2.3 æ··åˆç±»å‹ï¼šå‡½æ•° + å­—æ®µ

```ts
type Counter = {
  count: number
  inc(): void
}
```

TS å¯¹å¯¹è±¡å¯ä»¥éšæ„ç»„åˆã€‚

---

# 3. ç´¢å¼•ç­¾åï¼šç»“æ„æœªçŸ¥ä½†æ¨¡å¼å›ºå®šçš„å¯¹è±¡

é€‚åˆ dictionary / map / recordï¼š

```ts
type Dict = {
  [key: string]: number
}

const prices: Dict = {
  apple: 10,
  orange: 20
}
```

---

## 3.1 é™åˆ¶é”®çš„ç±»å‹

```ts
type Flags = {
  [K: 'on' | 'off']: boolean
}
```

---

## 3.2 readonly ç´¢å¼•

```ts
type ReadonlyMap = {
  readonly [key: string]: number
}
```

---

# 4. æ˜ å°„ç±»å‹ï¼ˆMapped Typesï¼‰ï¼šå¯¹è±¡ç±»å‹çš„é­”æ³•é˜µ

æ˜ å°„ç±»å‹èƒ½è‡ªåŠ¨â€œéå†å¯¹è±¡çš„é”®â€ï¼š

## 4.1 æœ€åŸºæœ¬å½¢æ€

```ts
type PartialUser<T> = {
  [K in keyof T]?: T[K]
}
```

---

## 4.2 æ˜ å°„ + ä¿®é¥°ç¬¦ï¼ˆ+ã€-ï¼‰

### å»æ‰ readonlyï¼š

```ts
type Mutable<T> = {
  -readonly [K in keyof T]: T[K]
}
```

### å˜æˆå…¨éƒ¨ readonlyï¼š

```ts
type ReadonlyAll<T> = {
  readonly [K in keyof T]: T[K]
}
```

---

## 4.3 å˜æˆå…¨éƒ¨å¯é€‰

```ts
type PartialAll<T> = {
  [K in keyof T]?: T[K]
}
```

---

## 4.4 å˜æˆå…¨éƒ¨å¿…å¡«

```ts
type RequiredAll<T> = {
  [K in keyof T]-?: T[K]
}
```

---

# 5. å†…ç½®å·¥å…·ç±»å‹ï¼šæ˜ å°„ç±»å‹çš„å·¥ä¸šçº§åº”ç”¨

è¿™äº›æ˜¯ TS çš„â€œå¯¹è±¡å·¥ä½œå°â€ã€‚

---

## 5.1 `Partial<T>`

å˜å…¨éƒ¨å¯é€‰ã€‚

```ts
type P = Partial<{ a: number; b: string }>
```

---

## 5.2 `Required<T>`

å»æ‰å¯é€‰ã€‚

---

## 5.3 `Readonly<T>`

å…¨éƒ¨å˜åªè¯»ã€‚

---

## 5.4 `Pick<T, K>`

æŒ‰é”®æŒ‘å±æ€§ã€‚

```ts
type P = Pick<User, 'id'>
```

---

## 5.5 `Omit<T, K>`

å»æ‰éƒ¨åˆ†é”®ã€‚

```ts
type P = Omit<User, 'password'>
```

---

## 5.6 `Record<K, T>`

æ„é€ ä¸€ä¸ªâ€œé”®â†’ç±»å‹â€çš„å¯¹è±¡ã€‚

```ts
type Flags = Record<'x' | 'y', boolean>
```

---

## 5.7 `ReturnType<T>`, `Parameters<T>`

æ¥è‡ªå‡½æ•°ï¼Œä½†å¤§é‡ç”¨äºå¯¹è±¡çš„â€œå·¥å‚ç±»å‹æ¨æ–­â€ã€‚

---

# 6. æ·±å±‚å¯¹è±¡ç±»å‹ï¼šé€’å½’æ˜ å°„ã€DeepPartial ç­‰

## 6.1 DeepPartialï¼ˆå¸¸è§é€’å½’ç»“æ„ï¼‰

```ts
type DeepPartial<T> = {
  [K in keyof T]?: T[K] extends object
    ? DeepPartial<T[K]>
    : T[K]
}
```

å˜æˆï¼š

```ts
{
  a?: {
    b?: { c?: number }
  }
}
```

---

## 6.2 DeepReadonly

```ts
type DeepReadonly<T> = {
  readonly [K in keyof T]: T[K] extends object
    ? DeepReadonly<T[K]>
    : T[K]
}
```

---

## 6.3 ObjectPath ç”Ÿæˆï¼ˆéå¸¸é«˜çº§ï¼‰

ç”Ÿæˆå¯¹è±¡çš„è·¯å¾„ `'a.b.c'` ç±»å‹ï¼š

```ts
type Paths<T, Prev extends string = ''> = {
  [K in keyof T]:
    T[K] extends object
      ? Paths<T[K], `${Prev}${K & string}.`>
      : `${Prev}${K & string}`
}[keyof T]
```

---

# 7. å¯¹è±¡ç±»å‹çš„æ³›å‹æŠ€å·§

## 7.1 â€œPick + æ³›å‹â€ å®ç°å­—æ®µä¾èµ–

```ts
function pluck<T, K extends keyof T>(obj: T, keys: K[]): T[K][] {
  return keys.map(k => obj[k])
}
```

---

## 7.2 å¯¹è±¡çš„åˆå¹¶ç±»å‹ï¼ˆäº¤å‰ç±»å‹ï¼‰

```ts
function merge<A, B>(a: A, b: B): A & B {
  return { ...a, ...b }
}
```

---

# 8. å¯¹è±¡ç±»å‹ + è”åˆç±»å‹ï¼šè¾¨è¯†è”åˆï¼ˆDiscriminated Unionï¼‰

è¿™æ˜¯ TS å¯¹è±¡ç±»å‹çš„å·…å³°è¯­æ³•ã€‚

```ts
type Shape =
  | { kind: 'circle'; r: number }
  | { kind: 'square'; s: number }
  | { kind: 'rect'; w: number; h: number }
```

æ ¹æ® `kind` è‡ªåŠ¨ç¼©å°ç±»å‹ï¼š

```ts
function area(s: Shape) {
  if (s.kind === 'circle') return Math.PI * s.r ** 2
}
```

---

# 9. å¯¹è±¡ç±»å‹çš„å¸¸è§é™·é˜±

## âŒ 9.1 ç”¨ objectã€{}ã€Object å¤ªå®½æ³›

```ts
function foo(v: object) {
  v.name // âŒ ä¸å­˜åœ¨
}
```

è§£å†³ï¼šä½¿ç”¨å…·ä½“å¯¹è±¡ç±»å‹ã€‚

---

## âŒ 9.2 ç´¢å¼•ç­¾åä¸æ˜ç¡®å±æ€§å†²çª

```ts
type T = {
  x: number
  [k: string]: string
}
```

`x` æ˜¯ numberï¼Œå´è¢«ç´¢å¼•ç­¾åè¦æ±‚ä¸º string â†’ å†²çªã€‚

---

## âŒ 9.3 å¿˜è®° readonly çš„è¡Œä¸º

readonly åªåœ¨ TS é˜¶æ®µé™åˆ¶ï¼Œè¿è¡Œæ—¶ä¾ç„¶å¯æ”¹ã€‚

---

## âŒ 9.4 æ·±å±‚å¯¹è±¡ä¸èƒ½ç”¨ Partial ç®€å•å¤„ç†

Partial ä¸ä¼šé€’å½’ï¼Œéœ€è¦ DeepPartialã€‚

---

# ğŸŒ™ Pocket Cardï¼ˆå¯¹è±¡ç±»å‹å°æŠ„ï¼‰

### âœ” æ™®é€šå¯¹è±¡ç±»å‹ï¼š`{ a: number }`

### âœ” ç´¢å¼•ç­¾åï¼š`[k: string]: number`

### âœ” æ˜ å°„ç±»å‹ï¼š`[K in keyof T]`

### âœ” å·¥å…·ç±»å‹ï¼šPartial / Required / Pick / Omit / Record

### âœ” æ·±å±‚å·¥å…·ï¼šDeepPartial / DeepReadonly

### âœ” å¯è¾¨è¯†è”åˆï¼š`{ kind: xxx } | ...`

### âœ” é¿å…ä½¿ç”¨ï¼š`object` / `{}` / `Object`

---

# å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­ä¸ºä½ æ„å»ºï¼š

* **å¯¹è±¡ç±»å‹ Hard æ¨¡å¼ 20 é¢˜ï¼ˆå«è§£æï¼‰**
* **å¦‚ä½•ç”¨ TS å»ºç«‹ä¸€å¥—ä¸¥è°¨çš„æ•°æ®æ¨¡å‹ï¼ˆç¤ºä¾‹ + å·¥å…·ç±»å‹ï¼‰**
* **å¸®ä½ é‡æ„é¡¹ç›®çš„å¯¹è±¡ç±»å‹ç»“æ„ï¼Œè®©å…¶æ›´å¼ºå£®å¯ç»´æŠ¤**

æƒ³ç»§ç»­å“ªéƒ¨åˆ†ï¼Ÿ
